<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>azure.storage.blobservice &mdash; pydocumentdb 0.9.3-preview documentation</title>
    
    <link rel="stylesheet" href="../../../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '0.9.3-preview',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../../_static/sidebar.js"></script>
    <link rel="top" title="pydocumentdb 0.9.3-preview documentation" href="../../../index.html" />
    <link rel="up" title="azure.storage" href="../storage.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="../../../index.html">pydocumentdb 0.9.3-preview documentation</a> &raquo;</li>
          <li><a href="../../index.html" >Module code</a> &raquo;</li>
          <li><a href="../../azure.html" >azure</a> &raquo;</li>
          <li><a href="../storage.html" accesskey="U">azure.storage</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <h1>Source code for azure.storage.blobservice</h1><div class="highlight"><pre>
<span class="c">#-------------------------------------------------------------------------</span>
<span class="c"># Copyright (c) Microsoft.  All rights reserved.</span>
<span class="c">#</span>
<span class="c"># Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span>
<span class="c"># you may not use this file except in compliance with the License.</span>
<span class="c"># You may obtain a copy of the License at</span>
<span class="c">#   http://www.apache.org/licenses/LICENSE-2.0</span>
<span class="c">#</span>
<span class="c"># Unless required by applicable law or agreed to in writing, software</span>
<span class="c"># distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span>
<span class="c"># WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span>
<span class="c"># See the License for the specific language governing permissions and</span>
<span class="c"># limitations under the License.</span>
<span class="c">#--------------------------------------------------------------------------</span>
<span class="kn">from</span> <span class="nn">azure</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">WindowsAzureError</span><span class="p">,</span>
    <span class="n">BLOB_SERVICE_HOST_BASE</span><span class="p">,</span>
    <span class="n">DEV_BLOB_HOST</span><span class="p">,</span>
    <span class="n">_ERROR_VALUE_NEGATIVE</span><span class="p">,</span>
    <span class="n">_ERROR_PAGE_BLOB_SIZE_ALIGNMENT</span><span class="p">,</span>
    <span class="n">_convert_class_to_xml</span><span class="p">,</span>
    <span class="n">_dont_fail_not_exist</span><span class="p">,</span>
    <span class="n">_dont_fail_on_exist</span><span class="p">,</span>
    <span class="n">_encode_base64</span><span class="p">,</span>
    <span class="n">_get_request_body</span><span class="p">,</span>
    <span class="n">_get_request_body_bytes_only</span><span class="p">,</span>
    <span class="n">_int_or_none</span><span class="p">,</span>
    <span class="n">_parse_response_for_dict</span><span class="p">,</span>
    <span class="n">_parse_response_for_dict_filter</span><span class="p">,</span>
    <span class="n">_parse_response_for_dict_prefix</span><span class="p">,</span>
    <span class="n">_str</span><span class="p">,</span>
    <span class="n">_str_or_none</span><span class="p">,</span>
    <span class="n">_update_request_uri_query_local_storage</span><span class="p">,</span>
    <span class="n">_validate_type_bytes</span><span class="p">,</span>
    <span class="n">_validate_not_none</span><span class="p">,</span>
    <span class="n">_ETreeXmlToObject</span><span class="p">,</span>
    <span class="p">)</span>
<span class="kn">from</span> <span class="nn">azure.http</span> <span class="kn">import</span> <span class="n">HTTPRequest</span>
<span class="kn">from</span> <span class="nn">azure.storage</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">Container</span><span class="p">,</span>
    <span class="n">ContainerEnumResults</span><span class="p">,</span>
    <span class="n">PageList</span><span class="p">,</span>
    <span class="n">PageRange</span><span class="p">,</span>
    <span class="n">SignedIdentifiers</span><span class="p">,</span>
    <span class="n">StorageServiceProperties</span><span class="p">,</span>
    <span class="n">_convert_block_list_to_xml</span><span class="p">,</span>
    <span class="n">_convert_response_to_block_list</span><span class="p">,</span>
    <span class="n">_create_blob_result</span><span class="p">,</span>
    <span class="n">_parse_blob_enum_results_list</span><span class="p">,</span>
    <span class="n">_update_storage_blob_header</span><span class="p">,</span>
    <span class="p">)</span>
<span class="kn">from</span> <span class="nn">azure.storage.storageclient</span> <span class="kn">import</span> <span class="n">_StorageClient</span>
<span class="kn">from</span> <span class="nn">os</span> <span class="kn">import</span> <span class="n">path</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="k">if</span> <span class="n">sys</span><span class="o">.</span><span class="n">version_info</span> <span class="o">&gt;=</span> <span class="p">(</span><span class="mi">3</span><span class="p">,):</span>
    <span class="kn">from</span> <span class="nn">io</span> <span class="kn">import</span> <span class="n">BytesIO</span>
<span class="k">else</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">cStringIO</span> <span class="kn">import</span> <span class="n">StringIO</span> <span class="k">as</span> <span class="n">BytesIO</span>

<span class="c"># Keep this value sync with _ERROR_PAGE_BLOB_SIZE_ALIGNMENT</span>
<span class="n">_PAGE_SIZE</span> <span class="o">=</span> <span class="mi">512</span>


<div class="viewcode-block" id="BlobService"><a class="viewcode-back" href="../../../api/azure.storage.blobservice.html#azure.storage.blobservice.BlobService">[docs]</a><span class="k">class</span> <span class="nc">BlobService</span><span class="p">(</span><span class="n">_StorageClient</span><span class="p">):</span>

    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    This is the main class managing Blob resources.</span>
<span class="sd">    &#39;&#39;&#39;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">account_name</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">account_key</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">protocol</span><span class="o">=</span><span class="s">&#39;https&#39;</span><span class="p">,</span>
                 <span class="n">host_base</span><span class="o">=</span><span class="n">BLOB_SERVICE_HOST_BASE</span><span class="p">,</span> <span class="n">dev_host</span><span class="o">=</span><span class="n">DEV_BLOB_HOST</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        account_name: your storage account name, required for all operations.</span>
<span class="sd">        account_key: your storage account key, required for all operations.</span>
<span class="sd">        protocol: Optional. Protocol. Defaults to https.</span>
<span class="sd">        host_base:</span>
<span class="sd">            Optional. Live host base url. Defaults to Azure url. Override this</span>
<span class="sd">            for on-premise.</span>
<span class="sd">        dev_host: Optional. Dev host url. Defaults to localhost.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_BLOB_MAX_DATA_SIZE</span> <span class="o">=</span> <span class="mi">64</span> <span class="o">*</span> <span class="mi">1024</span> <span class="o">*</span> <span class="mi">1024</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_BLOB_MAX_CHUNK_DATA_SIZE</span> <span class="o">=</span> <span class="mi">4</span> <span class="o">*</span> <span class="mi">1024</span> <span class="o">*</span> <span class="mi">1024</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">BlobService</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span>
            <span class="n">account_name</span><span class="p">,</span> <span class="n">account_key</span><span class="p">,</span> <span class="n">protocol</span><span class="p">,</span> <span class="n">host_base</span><span class="p">,</span> <span class="n">dev_host</span><span class="p">)</span>

<div class="viewcode-block" id="BlobService.make_blob_url"><a class="viewcode-back" href="../../../api/azure.storage.blobservice.html#azure.storage.blobservice.BlobService.make_blob_url">[docs]</a>    <span class="k">def</span> <span class="nf">make_blob_url</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">container_name</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">,</span> <span class="n">account_name</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                      <span class="n">protocol</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">host_base</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Creates the url to access a blob.</span>

<span class="sd">        container_name: Name of container.</span>
<span class="sd">        blob_name: Name of blob.</span>
<span class="sd">        account_name:</span>
<span class="sd">            Name of the storage account. If not specified, uses the account</span>
<span class="sd">            specified when BlobService was initialized.</span>
<span class="sd">        protocol:</span>
<span class="sd">            Protocol to use: &#39;http&#39; or &#39;https&#39;. If not specified, uses the</span>
<span class="sd">            protocol specified when BlobService was initialized.</span>
<span class="sd">        host_base:</span>
<span class="sd">            Live host base url.  If not specified, uses the host base specified</span>
<span class="sd">            when BlobService was initialized.</span>
<span class="sd">        &#39;&#39;&#39;</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">account_name</span><span class="p">:</span>
            <span class="n">account_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">account_name</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">protocol</span><span class="p">:</span>
            <span class="n">protocol</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">protocol</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">host_base</span><span class="p">:</span>
            <span class="n">host_base</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">host_base</span>

        <span class="k">return</span> <span class="s">&#39;{0}://{1}{2}/{3}/{4}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">protocol</span><span class="p">,</span>
                                             <span class="n">account_name</span><span class="p">,</span>
                                             <span class="n">host_base</span><span class="p">,</span>
                                             <span class="n">container_name</span><span class="p">,</span>
                                             <span class="n">blob_name</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="BlobService.list_containers"><a class="viewcode-back" href="../../../api/azure.storage.blobservice.html#azure.storage.blobservice.BlobService.list_containers">[docs]</a>    <span class="k">def</span> <span class="nf">list_containers</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prefix</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">maxresults</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                        <span class="n">include</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        The List Containers operation returns a list of the containers under</span>
<span class="sd">        the specified account.</span>

<span class="sd">        prefix:</span>
<span class="sd">            Optional. Filters the results to return only containers whose names</span>
<span class="sd">            begin with the specified prefix.</span>
<span class="sd">        marker:</span>
<span class="sd">            Optional. A string value that identifies the portion of the list to</span>
<span class="sd">            be returned with the next list operation.</span>
<span class="sd">        maxresults:</span>
<span class="sd">            Optional. Specifies the maximum number of containers to return.</span>
<span class="sd">        include:</span>
<span class="sd">            Optional. Include this parameter to specify that the container&#39;s</span>
<span class="sd">            metadata be returned as part of the response body. set this</span>
<span class="sd">            parameter to string &#39;metadata&#39; to get container&#39;s metadata.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">HTTPRequest</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="s">&#39;GET&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">host</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_host</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="s">&#39;/?comp=list&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">(</span><span class="s">&#39;prefix&#39;</span><span class="p">,</span> <span class="n">_str_or_none</span><span class="p">(</span><span class="n">prefix</span><span class="p">)),</span>
            <span class="p">(</span><span class="s">&#39;marker&#39;</span><span class="p">,</span> <span class="n">_str_or_none</span><span class="p">(</span><span class="n">marker</span><span class="p">)),</span>
            <span class="p">(</span><span class="s">&#39;maxresults&#39;</span><span class="p">,</span> <span class="n">_int_or_none</span><span class="p">(</span><span class="n">maxresults</span><span class="p">)),</span>
            <span class="p">(</span><span class="s">&#39;include&#39;</span><span class="p">,</span> <span class="n">_str_or_none</span><span class="p">(</span><span class="n">include</span><span class="p">))</span>
        <span class="p">]</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="n">request</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="n">_update_request_uri_query_local_storage</span><span class="p">(</span>
            <span class="n">request</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_local_storage</span><span class="p">)</span>
        <span class="n">request</span><span class="o">.</span><span class="n">headers</span> <span class="o">=</span> <span class="n">_update_storage_blob_header</span><span class="p">(</span>
            <span class="n">request</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">account_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">account_key</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_perform_request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">_ETreeXmlToObject</span><span class="o">.</span><span class="n">parse_enum_results_list</span><span class="p">(</span>
            <span class="n">response</span><span class="p">,</span> <span class="n">ContainerEnumResults</span><span class="p">,</span> <span class="s">&quot;Containers&quot;</span><span class="p">,</span> <span class="n">Container</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="BlobService.create_container"><a class="viewcode-back" href="../../../api/azure.storage.blobservice.html#azure.storage.blobservice.BlobService.create_container">[docs]</a>    <span class="k">def</span> <span class="nf">create_container</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">container_name</span><span class="p">,</span> <span class="n">x_ms_meta_name_values</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                         <span class="n">x_ms_blob_public_access</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">fail_on_exist</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Creates a new container under the specified account. If the container</span>
<span class="sd">        with the same name already exists, the operation fails.</span>

<span class="sd">        container_name: Name of container to create.</span>
<span class="sd">        x_ms_meta_name_values:</span>
<span class="sd">            Optional. A dict with name_value pairs to associate with the</span>
<span class="sd">            container as metadata. Example:{&#39;Category&#39;:&#39;test&#39;}</span>
<span class="sd">        x_ms_blob_public_access:</span>
<span class="sd">            Optional. Possible values include: container, blob</span>
<span class="sd">        fail_on_exist:</span>
<span class="sd">            specify whether to throw an exception when the container exists.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s">&#39;container_name&#39;</span><span class="p">,</span> <span class="n">container_name</span><span class="p">)</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">HTTPRequest</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="s">&#39;PUT&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">host</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_host</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="s">&#39;/&#39;</span> <span class="o">+</span> <span class="n">_str</span><span class="p">(</span><span class="n">container_name</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39;?restype=container&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">headers</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">(</span><span class="s">&#39;x-ms-meta-name-values&#39;</span><span class="p">,</span> <span class="n">x_ms_meta_name_values</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&#39;x-ms-blob-public-access&#39;</span><span class="p">,</span> <span class="n">_str_or_none</span><span class="p">(</span><span class="n">x_ms_blob_public_access</span><span class="p">))</span>
        <span class="p">]</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="n">request</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="n">_update_request_uri_query_local_storage</span><span class="p">(</span>
            <span class="n">request</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_local_storage</span><span class="p">)</span>
        <span class="n">request</span><span class="o">.</span><span class="n">headers</span> <span class="o">=</span> <span class="n">_update_storage_blob_header</span><span class="p">(</span>
            <span class="n">request</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">account_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">account_key</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">fail_on_exist</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_perform_request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
                <span class="k">return</span> <span class="bp">True</span>
            <span class="k">except</span> <span class="n">WindowsAzureError</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
                <span class="n">_dont_fail_on_exist</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span>
                <span class="k">return</span> <span class="bp">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_perform_request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">True</span>
</div>
<div class="viewcode-block" id="BlobService.get_container_properties"><a class="viewcode-back" href="../../../api/azure.storage.blobservice.html#azure.storage.blobservice.BlobService.get_container_properties">[docs]</a>    <span class="k">def</span> <span class="nf">get_container_properties</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">container_name</span><span class="p">,</span> <span class="n">x_ms_lease_id</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Returns all user-defined metadata and system properties for the</span>
<span class="sd">        specified container.</span>

<span class="sd">        container_name: Name of existing container.</span>
<span class="sd">        x_ms_lease_id:</span>
<span class="sd">            If specified, get_container_properties only succeeds if the</span>
<span class="sd">            container&#39;s lease is active and matches this ID.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s">&#39;container_name&#39;</span><span class="p">,</span> <span class="n">container_name</span><span class="p">)</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">HTTPRequest</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="s">&#39;GET&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">host</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_host</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="s">&#39;/&#39;</span> <span class="o">+</span> <span class="n">_str</span><span class="p">(</span><span class="n">container_name</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39;?restype=container&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">headers</span> <span class="o">=</span> <span class="p">[(</span><span class="s">&#39;x-ms-lease-id&#39;</span><span class="p">,</span> <span class="n">_str_or_none</span><span class="p">(</span><span class="n">x_ms_lease_id</span><span class="p">))]</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="n">request</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="n">_update_request_uri_query_local_storage</span><span class="p">(</span>
            <span class="n">request</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_local_storage</span><span class="p">)</span>
        <span class="n">request</span><span class="o">.</span><span class="n">headers</span> <span class="o">=</span> <span class="n">_update_storage_blob_header</span><span class="p">(</span>
            <span class="n">request</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">account_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">account_key</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_perform_request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">_parse_response_for_dict</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="BlobService.get_container_metadata"><a class="viewcode-back" href="../../../api/azure.storage.blobservice.html#azure.storage.blobservice.BlobService.get_container_metadata">[docs]</a>    <span class="k">def</span> <span class="nf">get_container_metadata</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">container_name</span><span class="p">,</span> <span class="n">x_ms_lease_id</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Returns all user-defined metadata for the specified container. The</span>
<span class="sd">        metadata will be in returned dictionary[&#39;x-ms-meta-(name)&#39;].</span>

<span class="sd">        container_name: Name of existing container.</span>
<span class="sd">        x_ms_lease_id:</span>
<span class="sd">            If specified, get_container_metadata only succeeds if the</span>
<span class="sd">            container&#39;s lease is active and matches this ID.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s">&#39;container_name&#39;</span><span class="p">,</span> <span class="n">container_name</span><span class="p">)</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">HTTPRequest</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="s">&#39;GET&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">host</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_host</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="s">&#39;/&#39;</span> <span class="o">+</span> \
            <span class="n">_str</span><span class="p">(</span><span class="n">container_name</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39;?restype=container&amp;comp=metadata&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">headers</span> <span class="o">=</span> <span class="p">[(</span><span class="s">&#39;x-ms-lease-id&#39;</span><span class="p">,</span> <span class="n">_str_or_none</span><span class="p">(</span><span class="n">x_ms_lease_id</span><span class="p">))]</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="n">request</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="n">_update_request_uri_query_local_storage</span><span class="p">(</span>
            <span class="n">request</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_local_storage</span><span class="p">)</span>
        <span class="n">request</span><span class="o">.</span><span class="n">headers</span> <span class="o">=</span> <span class="n">_update_storage_blob_header</span><span class="p">(</span>
            <span class="n">request</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">account_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">account_key</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_perform_request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">_parse_response_for_dict_prefix</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">prefixes</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;x-ms-meta&#39;</span><span class="p">])</span>
</div>
<div class="viewcode-block" id="BlobService.set_container_metadata"><a class="viewcode-back" href="../../../api/azure.storage.blobservice.html#azure.storage.blobservice.BlobService.set_container_metadata">[docs]</a>    <span class="k">def</span> <span class="nf">set_container_metadata</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">container_name</span><span class="p">,</span>
                               <span class="n">x_ms_meta_name_values</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">x_ms_lease_id</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Sets one or more user-defined name-value pairs for the specified</span>
<span class="sd">        container.</span>

<span class="sd">        container_name: Name of existing container.</span>
<span class="sd">        x_ms_meta_name_values:</span>
<span class="sd">            A dict containing name, value for metadata.</span>
<span class="sd">            Example: {&#39;category&#39;:&#39;test&#39;}</span>
<span class="sd">        x_ms_lease_id:</span>
<span class="sd">            If specified, set_container_metadata only succeeds if the</span>
<span class="sd">            container&#39;s lease is active and matches this ID.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s">&#39;container_name&#39;</span><span class="p">,</span> <span class="n">container_name</span><span class="p">)</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">HTTPRequest</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="s">&#39;PUT&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">host</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_host</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="s">&#39;/&#39;</span> <span class="o">+</span> \
            <span class="n">_str</span><span class="p">(</span><span class="n">container_name</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39;?restype=container&amp;comp=metadata&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">headers</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">(</span><span class="s">&#39;x-ms-meta-name-values&#39;</span><span class="p">,</span> <span class="n">x_ms_meta_name_values</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&#39;x-ms-lease-id&#39;</span><span class="p">,</span> <span class="n">_str_or_none</span><span class="p">(</span><span class="n">x_ms_lease_id</span><span class="p">)),</span>
        <span class="p">]</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="n">request</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="n">_update_request_uri_query_local_storage</span><span class="p">(</span>
            <span class="n">request</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_local_storage</span><span class="p">)</span>
        <span class="n">request</span><span class="o">.</span><span class="n">headers</span> <span class="o">=</span> <span class="n">_update_storage_blob_header</span><span class="p">(</span>
            <span class="n">request</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">account_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">account_key</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_perform_request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="BlobService.get_container_acl"><a class="viewcode-back" href="../../../api/azure.storage.blobservice.html#azure.storage.blobservice.BlobService.get_container_acl">[docs]</a>    <span class="k">def</span> <span class="nf">get_container_acl</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">container_name</span><span class="p">,</span> <span class="n">x_ms_lease_id</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Gets the permissions for the specified container.</span>

<span class="sd">        container_name: Name of existing container.</span>
<span class="sd">        x_ms_lease_id:</span>
<span class="sd">            If specified, get_container_acl only succeeds if the</span>
<span class="sd">            container&#39;s lease is active and matches this ID.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s">&#39;container_name&#39;</span><span class="p">,</span> <span class="n">container_name</span><span class="p">)</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">HTTPRequest</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="s">&#39;GET&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">host</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_host</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="s">&#39;/&#39;</span> <span class="o">+</span> \
            <span class="n">_str</span><span class="p">(</span><span class="n">container_name</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39;?restype=container&amp;comp=acl&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">headers</span> <span class="o">=</span> <span class="p">[(</span><span class="s">&#39;x-ms-lease-id&#39;</span><span class="p">,</span> <span class="n">_str_or_none</span><span class="p">(</span><span class="n">x_ms_lease_id</span><span class="p">))]</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="n">request</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="n">_update_request_uri_query_local_storage</span><span class="p">(</span>
            <span class="n">request</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_local_storage</span><span class="p">)</span>
        <span class="n">request</span><span class="o">.</span><span class="n">headers</span> <span class="o">=</span> <span class="n">_update_storage_blob_header</span><span class="p">(</span>
            <span class="n">request</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">account_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">account_key</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_perform_request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">_ETreeXmlToObject</span><span class="o">.</span><span class="n">parse_response</span><span class="p">(</span>
            <span class="n">response</span><span class="p">,</span> <span class="n">SignedIdentifiers</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="BlobService.set_container_acl"><a class="viewcode-back" href="../../../api/azure.storage.blobservice.html#azure.storage.blobservice.BlobService.set_container_acl">[docs]</a>    <span class="k">def</span> <span class="nf">set_container_acl</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">container_name</span><span class="p">,</span> <span class="n">signed_identifiers</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                          <span class="n">x_ms_blob_public_access</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">x_ms_lease_id</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Sets the permissions for the specified container.</span>

<span class="sd">        container_name: Name of existing container.</span>
<span class="sd">        signed_identifiers: SignedIdentifers instance</span>
<span class="sd">        x_ms_blob_public_access:</span>
<span class="sd">            Optional. Possible values include: container, blob</span>
<span class="sd">        x_ms_lease_id:</span>
<span class="sd">            If specified, set_container_acl only succeeds if the</span>
<span class="sd">            container&#39;s lease is active and matches this ID.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s">&#39;container_name&#39;</span><span class="p">,</span> <span class="n">container_name</span><span class="p">)</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">HTTPRequest</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="s">&#39;PUT&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">host</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_host</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="s">&#39;/&#39;</span> <span class="o">+</span> \
            <span class="n">_str</span><span class="p">(</span><span class="n">container_name</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39;?restype=container&amp;comp=acl&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">headers</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">(</span><span class="s">&#39;x-ms-blob-public-access&#39;</span><span class="p">,</span> <span class="n">_str_or_none</span><span class="p">(</span><span class="n">x_ms_blob_public_access</span><span class="p">)),</span>
            <span class="p">(</span><span class="s">&#39;x-ms-lease-id&#39;</span><span class="p">,</span> <span class="n">_str_or_none</span><span class="p">(</span><span class="n">x_ms_lease_id</span><span class="p">)),</span>
        <span class="p">]</span>
        <span class="n">request</span><span class="o">.</span><span class="n">body</span> <span class="o">=</span> <span class="n">_get_request_body</span><span class="p">(</span>
            <span class="n">_convert_class_to_xml</span><span class="p">(</span><span class="n">signed_identifiers</span><span class="p">))</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="n">request</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="n">_update_request_uri_query_local_storage</span><span class="p">(</span>
            <span class="n">request</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_local_storage</span><span class="p">)</span>
        <span class="n">request</span><span class="o">.</span><span class="n">headers</span> <span class="o">=</span> <span class="n">_update_storage_blob_header</span><span class="p">(</span>
            <span class="n">request</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">account_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">account_key</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_perform_request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="BlobService.delete_container"><a class="viewcode-back" href="../../../api/azure.storage.blobservice.html#azure.storage.blobservice.BlobService.delete_container">[docs]</a>    <span class="k">def</span> <span class="nf">delete_container</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">container_name</span><span class="p">,</span> <span class="n">fail_not_exist</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
                         <span class="n">x_ms_lease_id</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Marks the specified container for deletion.</span>

<span class="sd">        container_name: Name of container to delete.</span>
<span class="sd">        fail_not_exist:</span>
<span class="sd">            Specify whether to throw an exception when the container doesn&#39;t</span>
<span class="sd">            exist.</span>
<span class="sd">        x_ms_lease_id: Required if the container has an active lease.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s">&#39;container_name&#39;</span><span class="p">,</span> <span class="n">container_name</span><span class="p">)</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">HTTPRequest</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="s">&#39;DELETE&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">host</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_host</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="s">&#39;/&#39;</span> <span class="o">+</span> <span class="n">_str</span><span class="p">(</span><span class="n">container_name</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39;?restype=container&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">headers</span> <span class="o">=</span> <span class="p">[(</span><span class="s">&#39;x-ms-lease-id&#39;</span><span class="p">,</span> <span class="n">_str_or_none</span><span class="p">(</span><span class="n">x_ms_lease_id</span><span class="p">))]</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="n">request</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="n">_update_request_uri_query_local_storage</span><span class="p">(</span>
            <span class="n">request</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_local_storage</span><span class="p">)</span>
        <span class="n">request</span><span class="o">.</span><span class="n">headers</span> <span class="o">=</span> <span class="n">_update_storage_blob_header</span><span class="p">(</span>
            <span class="n">request</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">account_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">account_key</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">fail_not_exist</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_perform_request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
                <span class="k">return</span> <span class="bp">True</span>
            <span class="k">except</span> <span class="n">WindowsAzureError</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
                <span class="n">_dont_fail_not_exist</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span>
                <span class="k">return</span> <span class="bp">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_perform_request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">True</span>
</div>
<div class="viewcode-block" id="BlobService.lease_container"><a class="viewcode-back" href="../../../api/azure.storage.blobservice.html#azure.storage.blobservice.BlobService.lease_container">[docs]</a>    <span class="k">def</span> <span class="nf">lease_container</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">container_name</span><span class="p">,</span> <span class="n">x_ms_lease_action</span><span class="p">,</span>
                        <span class="n">x_ms_lease_id</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">x_ms_lease_duration</span><span class="o">=</span><span class="mi">60</span><span class="p">,</span>
                        <span class="n">x_ms_lease_break_period</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                        <span class="n">x_ms_proposed_lease_id</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Establishes and manages a lock on a container for delete operations.</span>
<span class="sd">        The lock duration can be 15 to 60 seconds, or can be infinite.</span>

<span class="sd">        container_name: Name of existing container.</span>
<span class="sd">        x_ms_lease_action:</span>
<span class="sd">            Required. Possible values: acquire|renew|release|break|change</span>
<span class="sd">        x_ms_lease_id: Required if the container has an active lease.</span>
<span class="sd">        x_ms_lease_duration:</span>
<span class="sd">            Specifies the duration of the lease, in seconds, or negative one</span>
<span class="sd">            (-1) for a lease that never expires. A non-infinite lease can be</span>
<span class="sd">            between 15 and 60 seconds. A lease duration cannot be changed</span>
<span class="sd">            using renew or change. For backwards compatibility, the default is</span>
<span class="sd">            60, and the value is only used on an acquire operation.</span>
<span class="sd">        x_ms_lease_break_period:</span>
<span class="sd">            Optional. For a break operation, this is the proposed duration of</span>
<span class="sd">            seconds that the lease should continue before it is broken, between</span>
<span class="sd">            0 and 60 seconds. This break period is only used if it is shorter</span>
<span class="sd">            than the time remaining on the lease. If longer, the time remaining</span>
<span class="sd">            on the lease is used. A new lease will not be available before the</span>
<span class="sd">            break period has expired, but the lease may be held for longer than</span>
<span class="sd">            the break period. If this header does not appear with a break</span>
<span class="sd">            operation, a fixed-duration lease breaks after the remaining lease</span>
<span class="sd">            period elapses, and an infinite lease breaks immediately.</span>
<span class="sd">        x_ms_proposed_lease_id:</span>
<span class="sd">            Optional for acquire, required for change. Proposed lease ID, in a</span>
<span class="sd">            GUID string format.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s">&#39;container_name&#39;</span><span class="p">,</span> <span class="n">container_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s">&#39;x_ms_lease_action&#39;</span><span class="p">,</span> <span class="n">x_ms_lease_action</span><span class="p">)</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">HTTPRequest</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="s">&#39;PUT&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">host</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_host</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="s">&#39;/&#39;</span> <span class="o">+</span> \
            <span class="n">_str</span><span class="p">(</span><span class="n">container_name</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39;?restype=container&amp;comp=lease&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">headers</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">(</span><span class="s">&#39;x-ms-lease-id&#39;</span><span class="p">,</span> <span class="n">_str_or_none</span><span class="p">(</span><span class="n">x_ms_lease_id</span><span class="p">)),</span>
            <span class="p">(</span><span class="s">&#39;x-ms-lease-action&#39;</span><span class="p">,</span> <span class="n">_str_or_none</span><span class="p">(</span><span class="n">x_ms_lease_action</span><span class="p">)),</span>
            <span class="p">(</span><span class="s">&#39;x-ms-lease-duration&#39;</span><span class="p">,</span>
             <span class="n">_str_or_none</span><span class="p">(</span>
                 <span class="n">x_ms_lease_duration</span> <span class="k">if</span> <span class="n">x_ms_lease_action</span> <span class="o">==</span> <span class="s">&#39;acquire&#39;</span>\
                     <span class="k">else</span> <span class="bp">None</span><span class="p">)),</span>
            <span class="p">(</span><span class="s">&#39;x-ms-lease-break-period&#39;</span><span class="p">,</span> <span class="n">_str_or_none</span><span class="p">(</span><span class="n">x_ms_lease_break_period</span><span class="p">)),</span>
            <span class="p">(</span><span class="s">&#39;x-ms-proposed-lease-id&#39;</span><span class="p">,</span> <span class="n">_str_or_none</span><span class="p">(</span><span class="n">x_ms_proposed_lease_id</span><span class="p">)),</span>
        <span class="p">]</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="n">request</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="n">_update_request_uri_query_local_storage</span><span class="p">(</span>
            <span class="n">request</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_local_storage</span><span class="p">)</span>
        <span class="n">request</span><span class="o">.</span><span class="n">headers</span> <span class="o">=</span> <span class="n">_update_storage_blob_header</span><span class="p">(</span>
            <span class="n">request</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">account_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">account_key</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_perform_request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">_parse_response_for_dict_filter</span><span class="p">(</span>
            <span class="n">response</span><span class="p">,</span>
            <span class="nb">filter</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;x-ms-lease-id&#39;</span><span class="p">,</span> <span class="s">&#39;x-ms-lease-time&#39;</span><span class="p">])</span>
</div>
<div class="viewcode-block" id="BlobService.list_blobs"><a class="viewcode-back" href="../../../api/azure.storage.blobservice.html#azure.storage.blobservice.BlobService.list_blobs">[docs]</a>    <span class="k">def</span> <span class="nf">list_blobs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">container_name</span><span class="p">,</span> <span class="n">prefix</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                   <span class="n">maxresults</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">include</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Returns the list of blobs under the specified container.</span>

<span class="sd">        container_name: Name of existing container.</span>
<span class="sd">        prefix:</span>
<span class="sd">            Optional. Filters the results to return only blobs whose names</span>
<span class="sd">            begin with the specified prefix.</span>
<span class="sd">        marker:</span>
<span class="sd">            Optional. A string value that identifies the portion of the list</span>
<span class="sd">            to be returned with the next list operation. The operation returns</span>
<span class="sd">            a marker value within the response body if the list returned was</span>
<span class="sd">            not complete. The marker value may then be used in a subsequent</span>
<span class="sd">            call to request the next set of list items. The marker value is</span>
<span class="sd">            opaque to the client.</span>
<span class="sd">        maxresults:</span>
<span class="sd">            Optional. Specifies the maximum number of blobs to return,</span>
<span class="sd">            including all BlobPrefix elements. If the request does not specify</span>
<span class="sd">            maxresults or specifies a value greater than 5,000, the server will</span>
<span class="sd">            return up to 5,000 items. Setting maxresults to a value less than</span>
<span class="sd">            or equal to zero results in error response code 400 (Bad Request).</span>
<span class="sd">        include:</span>
<span class="sd">            Optional. Specifies one or more datasets to include in the</span>
<span class="sd">            response. To specify more than one of these options on the URI,</span>
<span class="sd">            you must separate each option with a comma. Valid values are:</span>
<span class="sd">                snapshots:</span>
<span class="sd">                    Specifies that snapshots should be included in the</span>
<span class="sd">                    enumeration. Snapshots are listed from oldest to newest in</span>
<span class="sd">                    the response.</span>
<span class="sd">                metadata:</span>
<span class="sd">                    Specifies that blob metadata be returned in the response.</span>
<span class="sd">                uncommittedblobs:</span>
<span class="sd">                    Specifies that blobs for which blocks have been uploaded,</span>
<span class="sd">                    but which have not been committed using Put Block List</span>
<span class="sd">                    (REST API), be included in the response.</span>
<span class="sd">                copy:</span>
<span class="sd">                    Version 2012-02-12 and newer. Specifies that metadata</span>
<span class="sd">                    related to any current or previous Copy Blob operation</span>
<span class="sd">                    should be included in the response.</span>
<span class="sd">        delimiter:</span>
<span class="sd">            Optional. When the request includes this parameter, the operation</span>
<span class="sd">            returns a BlobPrefix element in the response body that acts as a</span>
<span class="sd">            placeholder for all blobs whose names begin with the same</span>
<span class="sd">            substring up to the appearance of the delimiter character. The</span>
<span class="sd">            delimiter may be a single character or a string.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s">&#39;container_name&#39;</span><span class="p">,</span> <span class="n">container_name</span><span class="p">)</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">HTTPRequest</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="s">&#39;GET&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">host</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_host</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="s">&#39;/&#39;</span> <span class="o">+</span> \
            <span class="n">_str</span><span class="p">(</span><span class="n">container_name</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39;?restype=container&amp;comp=list&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">(</span><span class="s">&#39;prefix&#39;</span><span class="p">,</span> <span class="n">_str_or_none</span><span class="p">(</span><span class="n">prefix</span><span class="p">)),</span>
            <span class="p">(</span><span class="s">&#39;delimiter&#39;</span><span class="p">,</span> <span class="n">_str_or_none</span><span class="p">(</span><span class="n">delimiter</span><span class="p">)),</span>
            <span class="p">(</span><span class="s">&#39;marker&#39;</span><span class="p">,</span> <span class="n">_str_or_none</span><span class="p">(</span><span class="n">marker</span><span class="p">)),</span>
            <span class="p">(</span><span class="s">&#39;maxresults&#39;</span><span class="p">,</span> <span class="n">_int_or_none</span><span class="p">(</span><span class="n">maxresults</span><span class="p">)),</span>
            <span class="p">(</span><span class="s">&#39;include&#39;</span><span class="p">,</span> <span class="n">_str_or_none</span><span class="p">(</span><span class="n">include</span><span class="p">))</span>
        <span class="p">]</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="n">request</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="n">_update_request_uri_query_local_storage</span><span class="p">(</span>
            <span class="n">request</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_local_storage</span><span class="p">)</span>
        <span class="n">request</span><span class="o">.</span><span class="n">headers</span> <span class="o">=</span> <span class="n">_update_storage_blob_header</span><span class="p">(</span>
            <span class="n">request</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">account_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">account_key</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_perform_request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">_parse_blob_enum_results_list</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="BlobService.set_blob_service_properties"><a class="viewcode-back" href="../../../api/azure.storage.blobservice.html#azure.storage.blobservice.BlobService.set_blob_service_properties">[docs]</a>    <span class="k">def</span> <span class="nf">set_blob_service_properties</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">storage_service_properties</span><span class="p">,</span>
                                    <span class="n">timeout</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Sets the properties of a storage account&#39;s Blob service, including</span>
<span class="sd">        Windows Azure Storage Analytics. You can also use this operation to</span>
<span class="sd">        set the default request version for all incoming requests that do not</span>
<span class="sd">        have a version specified.</span>

<span class="sd">        storage_service_properties: a StorageServiceProperties object.</span>
<span class="sd">        timeout: Optional. The timeout parameter is expressed in seconds.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s">&#39;storage_service_properties&#39;</span><span class="p">,</span>
                           <span class="n">storage_service_properties</span><span class="p">)</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">HTTPRequest</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="s">&#39;PUT&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">host</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_host</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="s">&#39;/?restype=service&amp;comp=properties&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="p">[(</span><span class="s">&#39;timeout&#39;</span><span class="p">,</span> <span class="n">_int_or_none</span><span class="p">(</span><span class="n">timeout</span><span class="p">))]</span>
        <span class="n">request</span><span class="o">.</span><span class="n">body</span> <span class="o">=</span> <span class="n">_get_request_body</span><span class="p">(</span>
            <span class="n">_convert_class_to_xml</span><span class="p">(</span><span class="n">storage_service_properties</span><span class="p">))</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="n">request</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="n">_update_request_uri_query_local_storage</span><span class="p">(</span>
            <span class="n">request</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_local_storage</span><span class="p">)</span>
        <span class="n">request</span><span class="o">.</span><span class="n">headers</span> <span class="o">=</span> <span class="n">_update_storage_blob_header</span><span class="p">(</span>
            <span class="n">request</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">account_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">account_key</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_perform_request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="BlobService.get_blob_service_properties"><a class="viewcode-back" href="../../../api/azure.storage.blobservice.html#azure.storage.blobservice.BlobService.get_blob_service_properties">[docs]</a>    <span class="k">def</span> <span class="nf">get_blob_service_properties</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Gets the properties of a storage account&#39;s Blob service, including</span>
<span class="sd">        Windows Azure Storage Analytics.</span>

<span class="sd">        timeout: Optional. The timeout parameter is expressed in seconds.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">HTTPRequest</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="s">&#39;GET&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">host</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_host</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="s">&#39;/?restype=service&amp;comp=properties&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="p">[(</span><span class="s">&#39;timeout&#39;</span><span class="p">,</span> <span class="n">_int_or_none</span><span class="p">(</span><span class="n">timeout</span><span class="p">))]</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="n">request</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="n">_update_request_uri_query_local_storage</span><span class="p">(</span>
            <span class="n">request</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_local_storage</span><span class="p">)</span>
        <span class="n">request</span><span class="o">.</span><span class="n">headers</span> <span class="o">=</span> <span class="n">_update_storage_blob_header</span><span class="p">(</span>
            <span class="n">request</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">account_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">account_key</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_perform_request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">_ETreeXmlToObject</span><span class="o">.</span><span class="n">parse_response</span><span class="p">(</span>
            <span class="n">response</span><span class="p">,</span> <span class="n">StorageServiceProperties</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="BlobService.get_blob_properties"><a class="viewcode-back" href="../../../api/azure.storage.blobservice.html#azure.storage.blobservice.BlobService.get_blob_properties">[docs]</a>    <span class="k">def</span> <span class="nf">get_blob_properties</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">container_name</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">,</span>
                            <span class="n">x_ms_lease_id</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Returns all user-defined metadata, standard HTTP properties, and</span>
<span class="sd">        system properties for the blob.</span>

<span class="sd">        container_name: Name of existing container.</span>
<span class="sd">        blob_name: Name of existing blob.</span>
<span class="sd">        x_ms_lease_id: Required if the blob has an active lease.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s">&#39;container_name&#39;</span><span class="p">,</span> <span class="n">container_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s">&#39;blob_name&#39;</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">)</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">HTTPRequest</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="s">&#39;HEAD&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">host</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_host</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="s">&#39;/&#39;</span> <span class="o">+</span> <span class="n">_str</span><span class="p">(</span><span class="n">container_name</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39;/&#39;</span> <span class="o">+</span> <span class="n">_str</span><span class="p">(</span><span class="n">blob_name</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39;&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">headers</span> <span class="o">=</span> <span class="p">[(</span><span class="s">&#39;x-ms-lease-id&#39;</span><span class="p">,</span> <span class="n">_str_or_none</span><span class="p">(</span><span class="n">x_ms_lease_id</span><span class="p">))]</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="n">request</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="n">_update_request_uri_query_local_storage</span><span class="p">(</span>
            <span class="n">request</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_local_storage</span><span class="p">)</span>
        <span class="n">request</span><span class="o">.</span><span class="n">headers</span> <span class="o">=</span> <span class="n">_update_storage_blob_header</span><span class="p">(</span>
            <span class="n">request</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">account_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">account_key</span><span class="p">)</span>

        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_perform_request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">_parse_response_for_dict</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="BlobService.set_blob_properties"><a class="viewcode-back" href="../../../api/azure.storage.blobservice.html#azure.storage.blobservice.BlobService.set_blob_properties">[docs]</a>    <span class="k">def</span> <span class="nf">set_blob_properties</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">container_name</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">,</span>
                            <span class="n">x_ms_blob_cache_control</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                            <span class="n">x_ms_blob_content_type</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                            <span class="n">x_ms_blob_content_md5</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                            <span class="n">x_ms_blob_content_encoding</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                            <span class="n">x_ms_blob_content_language</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                            <span class="n">x_ms_lease_id</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Sets system properties on the blob.</span>

<span class="sd">        container_name: Name of existing container.</span>
<span class="sd">        blob_name: Name of existing blob.</span>
<span class="sd">        x_ms_blob_cache_control:</span>
<span class="sd">            Optional. Modifies the cache control string for the blob.</span>
<span class="sd">        x_ms_blob_content_type: Optional. Sets the blob&#39;s content type.</span>
<span class="sd">        x_ms_blob_content_md5: Optional. Sets the blob&#39;s MD5 hash.</span>
<span class="sd">        x_ms_blob_content_encoding: Optional. Sets the blob&#39;s content encoding.</span>
<span class="sd">        x_ms_blob_content_language: Optional. Sets the blob&#39;s content language.</span>
<span class="sd">        x_ms_lease_id: Required if the blob has an active lease.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s">&#39;container_name&#39;</span><span class="p">,</span> <span class="n">container_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s">&#39;blob_name&#39;</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">)</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">HTTPRequest</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="s">&#39;PUT&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">host</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_host</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="s">&#39;/&#39;</span> <span class="o">+</span> \
            <span class="n">_str</span><span class="p">(</span><span class="n">container_name</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39;/&#39;</span> <span class="o">+</span> <span class="n">_str</span><span class="p">(</span><span class="n">blob_name</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39;?comp=properties&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">headers</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">(</span><span class="s">&#39;x-ms-blob-cache-control&#39;</span><span class="p">,</span> <span class="n">_str_or_none</span><span class="p">(</span><span class="n">x_ms_blob_cache_control</span><span class="p">)),</span>
            <span class="p">(</span><span class="s">&#39;x-ms-blob-content-type&#39;</span><span class="p">,</span> <span class="n">_str_or_none</span><span class="p">(</span><span class="n">x_ms_blob_content_type</span><span class="p">)),</span>
            <span class="p">(</span><span class="s">&#39;x-ms-blob-content-md5&#39;</span><span class="p">,</span> <span class="n">_str_or_none</span><span class="p">(</span><span class="n">x_ms_blob_content_md5</span><span class="p">)),</span>
            <span class="p">(</span><span class="s">&#39;x-ms-blob-content-encoding&#39;</span><span class="p">,</span>
             <span class="n">_str_or_none</span><span class="p">(</span><span class="n">x_ms_blob_content_encoding</span><span class="p">)),</span>
            <span class="p">(</span><span class="s">&#39;x-ms-blob-content-language&#39;</span><span class="p">,</span>
             <span class="n">_str_or_none</span><span class="p">(</span><span class="n">x_ms_blob_content_language</span><span class="p">)),</span>
            <span class="p">(</span><span class="s">&#39;x-ms-lease-id&#39;</span><span class="p">,</span> <span class="n">_str_or_none</span><span class="p">(</span><span class="n">x_ms_lease_id</span><span class="p">))</span>
        <span class="p">]</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="n">request</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="n">_update_request_uri_query_local_storage</span><span class="p">(</span>
            <span class="n">request</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_local_storage</span><span class="p">)</span>
        <span class="n">request</span><span class="o">.</span><span class="n">headers</span> <span class="o">=</span> <span class="n">_update_storage_blob_header</span><span class="p">(</span>
            <span class="n">request</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">account_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">account_key</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_perform_request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="BlobService.put_blob"><a class="viewcode-back" href="../../../api/azure.storage.blobservice.html#azure.storage.blobservice.BlobService.put_blob">[docs]</a>    <span class="k">def</span> <span class="nf">put_blob</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">container_name</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">,</span> <span class="n">blob</span><span class="p">,</span> <span class="n">x_ms_blob_type</span><span class="p">,</span>
                 <span class="n">content_encoding</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">content_language</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                 <span class="n">content_md5</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">cache_control</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                 <span class="n">x_ms_blob_content_type</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">x_ms_blob_content_encoding</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                 <span class="n">x_ms_blob_content_language</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">x_ms_blob_content_md5</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                 <span class="n">x_ms_blob_cache_control</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">x_ms_meta_name_values</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                 <span class="n">x_ms_lease_id</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">x_ms_blob_content_length</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                 <span class="n">x_ms_blob_sequence_number</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Creates a new block blob or page blob, or updates the content of an</span>
<span class="sd">        existing block blob.</span>

<span class="sd">        See put_block_blob_from_* and put_page_blob_from_* for high level</span>
<span class="sd">        functions that handle the creation and upload of large blobs with</span>
<span class="sd">        automatic chunking and progress notifications.</span>

<span class="sd">        container_name: Name of existing container.</span>
<span class="sd">        blob_name: Name of blob to create or update.</span>
<span class="sd">        blob:</span>
<span class="sd">            For BlockBlob:</span>
<span class="sd">                Content of blob as bytes (size &lt; 64MB). For larger size, you</span>
<span class="sd">                must call put_block and put_block_list to set content of blob.</span>
<span class="sd">            For PageBlob:</span>
<span class="sd">                Use None and call put_page to set content of blob.</span>
<span class="sd">        x_ms_blob_type: Required. Could be BlockBlob or PageBlob.</span>
<span class="sd">        content_encoding:</span>
<span class="sd">            Optional. Specifies which content encodings have been applied to</span>
<span class="sd">            the blob. This value is returned to the client when the Get Blob</span>
<span class="sd">            (REST API) operation is performed on the blob resource. The client</span>
<span class="sd">            can use this value when returned to decode the blob content.</span>
<span class="sd">        content_language:</span>
<span class="sd">            Optional. Specifies the natural languages used by this resource.</span>
<span class="sd">        content_md5:</span>
<span class="sd">            Optional. An MD5 hash of the blob content. This hash is used to</span>
<span class="sd">            verify the integrity of the blob during transport. When this header</span>
<span class="sd">            is specified, the storage service checks the hash that has arrived</span>
<span class="sd">            with the one that was sent. If the two hashes do not match, the</span>
<span class="sd">            operation will fail with error code 400 (Bad Request).</span>
<span class="sd">        cache_control:</span>
<span class="sd">            Optional. The Blob service stores this value but does not use or</span>
<span class="sd">            modify it.</span>
<span class="sd">        x_ms_blob_content_type: Optional. Set the blob&#39;s content type.</span>
<span class="sd">        x_ms_blob_content_encoding: Optional. Set the blob&#39;s content encoding.</span>
<span class="sd">        x_ms_blob_content_language: Optional. Set the blob&#39;s content language.</span>
<span class="sd">        x_ms_blob_content_md5: Optional. Set the blob&#39;s MD5 hash.</span>
<span class="sd">        x_ms_blob_cache_control: Optional. Sets the blob&#39;s cache control.</span>
<span class="sd">        x_ms_meta_name_values: A dict containing name, value for metadata.</span>
<span class="sd">        x_ms_lease_id: Required if the blob has an active lease.</span>
<span class="sd">        x_ms_blob_content_length:</span>
<span class="sd">            Required for page blobs. This header specifies the maximum size</span>
<span class="sd">            for the page blob, up to 1 TB. The page blob size must be aligned</span>
<span class="sd">            to a 512-byte boundary.</span>
<span class="sd">        x_ms_blob_sequence_number:</span>
<span class="sd">            Optional. Set for page blobs only. The sequence number is a</span>
<span class="sd">            user-controlled value that you can use to track requests. The</span>
<span class="sd">            value of the sequence number must be between 0 and 2^63 - 1. The</span>
<span class="sd">            default value is 0.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s">&#39;container_name&#39;</span><span class="p">,</span> <span class="n">container_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s">&#39;blob_name&#39;</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s">&#39;x_ms_blob_type&#39;</span><span class="p">,</span> <span class="n">x_ms_blob_type</span><span class="p">)</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">HTTPRequest</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="s">&#39;PUT&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">host</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_host</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="s">&#39;/&#39;</span> <span class="o">+</span> <span class="n">_str</span><span class="p">(</span><span class="n">container_name</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39;/&#39;</span> <span class="o">+</span> <span class="n">_str</span><span class="p">(</span><span class="n">blob_name</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39;&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">headers</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">(</span><span class="s">&#39;x-ms-blob-type&#39;</span><span class="p">,</span> <span class="n">_str_or_none</span><span class="p">(</span><span class="n">x_ms_blob_type</span><span class="p">)),</span>
            <span class="p">(</span><span class="s">&#39;Content-Encoding&#39;</span><span class="p">,</span> <span class="n">_str_or_none</span><span class="p">(</span><span class="n">content_encoding</span><span class="p">)),</span>
            <span class="p">(</span><span class="s">&#39;Content-Language&#39;</span><span class="p">,</span> <span class="n">_str_or_none</span><span class="p">(</span><span class="n">content_language</span><span class="p">)),</span>
            <span class="p">(</span><span class="s">&#39;Content-MD5&#39;</span><span class="p">,</span> <span class="n">_str_or_none</span><span class="p">(</span><span class="n">content_md5</span><span class="p">)),</span>
            <span class="p">(</span><span class="s">&#39;Cache-Control&#39;</span><span class="p">,</span> <span class="n">_str_or_none</span><span class="p">(</span><span class="n">cache_control</span><span class="p">)),</span>
            <span class="p">(</span><span class="s">&#39;x-ms-blob-content-type&#39;</span><span class="p">,</span> <span class="n">_str_or_none</span><span class="p">(</span><span class="n">x_ms_blob_content_type</span><span class="p">)),</span>
            <span class="p">(</span><span class="s">&#39;x-ms-blob-content-encoding&#39;</span><span class="p">,</span>
             <span class="n">_str_or_none</span><span class="p">(</span><span class="n">x_ms_blob_content_encoding</span><span class="p">)),</span>
            <span class="p">(</span><span class="s">&#39;x-ms-blob-content-language&#39;</span><span class="p">,</span>
             <span class="n">_str_or_none</span><span class="p">(</span><span class="n">x_ms_blob_content_language</span><span class="p">)),</span>
            <span class="p">(</span><span class="s">&#39;x-ms-blob-content-md5&#39;</span><span class="p">,</span> <span class="n">_str_or_none</span><span class="p">(</span><span class="n">x_ms_blob_content_md5</span><span class="p">)),</span>
            <span class="p">(</span><span class="s">&#39;x-ms-blob-cache-control&#39;</span><span class="p">,</span> <span class="n">_str_or_none</span><span class="p">(</span><span class="n">x_ms_blob_cache_control</span><span class="p">)),</span>
            <span class="p">(</span><span class="s">&#39;x-ms-meta-name-values&#39;</span><span class="p">,</span> <span class="n">x_ms_meta_name_values</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&#39;x-ms-lease-id&#39;</span><span class="p">,</span> <span class="n">_str_or_none</span><span class="p">(</span><span class="n">x_ms_lease_id</span><span class="p">)),</span>
            <span class="p">(</span><span class="s">&#39;x-ms-blob-content-length&#39;</span><span class="p">,</span>
             <span class="n">_str_or_none</span><span class="p">(</span><span class="n">x_ms_blob_content_length</span><span class="p">)),</span>
            <span class="p">(</span><span class="s">&#39;x-ms-blob-sequence-number&#39;</span><span class="p">,</span>
             <span class="n">_str_or_none</span><span class="p">(</span><span class="n">x_ms_blob_sequence_number</span><span class="p">))</span>
        <span class="p">]</span>
        <span class="n">request</span><span class="o">.</span><span class="n">body</span> <span class="o">=</span> <span class="n">_get_request_body_bytes_only</span><span class="p">(</span><span class="s">&#39;blob&#39;</span><span class="p">,</span> <span class="n">blob</span><span class="p">)</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="n">request</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="n">_update_request_uri_query_local_storage</span><span class="p">(</span>
            <span class="n">request</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_local_storage</span><span class="p">)</span>
        <span class="n">request</span><span class="o">.</span><span class="n">headers</span> <span class="o">=</span> <span class="n">_update_storage_blob_header</span><span class="p">(</span>
            <span class="n">request</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">account_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">account_key</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_perform_request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="BlobService.put_block_blob_from_path"><a class="viewcode-back" href="../../../api/azure.storage.blobservice.html#azure.storage.blobservice.BlobService.put_block_blob_from_path">[docs]</a>    <span class="k">def</span> <span class="nf">put_block_blob_from_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">container_name</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">,</span> <span class="n">file_path</span><span class="p">,</span>
                                 <span class="n">content_encoding</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">content_language</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                                 <span class="n">content_md5</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">cache_control</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                                 <span class="n">x_ms_blob_content_type</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                                 <span class="n">x_ms_blob_content_encoding</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                                 <span class="n">x_ms_blob_content_language</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                                 <span class="n">x_ms_blob_content_md5</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                                 <span class="n">x_ms_blob_cache_control</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                                 <span class="n">x_ms_meta_name_values</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                                 <span class="n">x_ms_lease_id</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">progress_callback</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Creates a new block blob from a file path, or updates the content of an</span>
<span class="sd">        existing block blob, with automatic chunking and progress notifications.</span>

<span class="sd">        container_name: Name of existing container.</span>
<span class="sd">        blob_name: Name of blob to create or update.</span>
<span class="sd">        file_path: Path of the file to upload as the blob content.</span>
<span class="sd">        content_encoding:</span>
<span class="sd">            Optional. Specifies which content encodings have been applied to</span>
<span class="sd">            the blob. This value is returned to the client when the Get Blob</span>
<span class="sd">            (REST API) operation is performed on the blob resource. The client</span>
<span class="sd">            can use this value when returned to decode the blob content.</span>
<span class="sd">        content_language:</span>
<span class="sd">            Optional. Specifies the natural languages used by this resource.</span>
<span class="sd">        content_md5:</span>
<span class="sd">            Optional. An MD5 hash of the blob content. This hash is used to</span>
<span class="sd">            verify the integrity of the blob during transport. When this header</span>
<span class="sd">            is specified, the storage service checks the hash that has arrived</span>
<span class="sd">            with the one that was sent. If the two hashes do not match, the</span>
<span class="sd">            operation will fail with error code 400 (Bad Request).</span>
<span class="sd">        cache_control:</span>
<span class="sd">            Optional. The Blob service stores this value but does not use or</span>
<span class="sd">            modify it.</span>
<span class="sd">        x_ms_blob_content_type: Optional. Set the blob&#39;s content type.</span>
<span class="sd">        x_ms_blob_content_encoding: Optional. Set the blob&#39;s content encoding.</span>
<span class="sd">        x_ms_blob_content_language: Optional. Set the blob&#39;s content language.</span>
<span class="sd">        x_ms_blob_content_md5: Optional. Set the blob&#39;s MD5 hash.</span>
<span class="sd">        x_ms_blob_cache_control: Optional. Sets the blob&#39;s cache control.</span>
<span class="sd">        x_ms_meta_name_values: A dict containing name, value for metadata.</span>
<span class="sd">        x_ms_lease_id: Required if the blob has an active lease.</span>
<span class="sd">        progress_callback:</span>
<span class="sd">            Callback for progress with signature function(current, total) where</span>
<span class="sd">            current is the number of bytes transfered so far, and total is the</span>
<span class="sd">            size of the blob, or None if the total size is unknown.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s">&#39;container_name&#39;</span><span class="p">,</span> <span class="n">container_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s">&#39;blob_name&#39;</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s">&#39;file_path&#39;</span><span class="p">,</span> <span class="n">file_path</span><span class="p">)</span>

        <span class="n">count</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="n">getsize</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="s">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">stream</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">put_block_blob_from_file</span><span class="p">(</span><span class="n">container_name</span><span class="p">,</span>
                                          <span class="n">blob_name</span><span class="p">,</span>
                                          <span class="n">stream</span><span class="p">,</span>
                                          <span class="n">count</span><span class="p">,</span>
                                          <span class="n">content_encoding</span><span class="p">,</span>
                                          <span class="n">content_language</span><span class="p">,</span>
                                          <span class="n">content_md5</span><span class="p">,</span>
                                          <span class="n">cache_control</span><span class="p">,</span>
                                          <span class="n">x_ms_blob_content_type</span><span class="p">,</span>
                                          <span class="n">x_ms_blob_content_encoding</span><span class="p">,</span>
                                          <span class="n">x_ms_blob_content_language</span><span class="p">,</span>
                                          <span class="n">x_ms_blob_content_md5</span><span class="p">,</span>
                                          <span class="n">x_ms_blob_cache_control</span><span class="p">,</span>
                                          <span class="n">x_ms_meta_name_values</span><span class="p">,</span>
                                          <span class="n">x_ms_lease_id</span><span class="p">,</span>
                                          <span class="n">progress_callback</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="BlobService.put_block_blob_from_file"><a class="viewcode-back" href="../../../api/azure.storage.blobservice.html#azure.storage.blobservice.BlobService.put_block_blob_from_file">[docs]</a>    <span class="k">def</span> <span class="nf">put_block_blob_from_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">container_name</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">,</span> <span class="n">stream</span><span class="p">,</span>
                                 <span class="n">count</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">content_encoding</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                                 <span class="n">content_language</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">content_md5</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                                 <span class="n">cache_control</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                                 <span class="n">x_ms_blob_content_type</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                                 <span class="n">x_ms_blob_content_encoding</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                                 <span class="n">x_ms_blob_content_language</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                                 <span class="n">x_ms_blob_content_md5</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                                 <span class="n">x_ms_blob_cache_control</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                                 <span class="n">x_ms_meta_name_values</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                                 <span class="n">x_ms_lease_id</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">progress_callback</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Creates a new block blob from a file/stream, or updates the content of</span>
<span class="sd">        an existing block blob, with automatic chunking and progress</span>
<span class="sd">        notifications.</span>

<span class="sd">        container_name: Name of existing container.</span>
<span class="sd">        blob_name: Name of blob to create or update.</span>
<span class="sd">        stream: Opened file/stream to upload as the blob content.</span>
<span class="sd">        count:</span>
<span class="sd">            Number of bytes to read from the stream. This is optional, but</span>
<span class="sd">            should be supplied for optimal performance.</span>
<span class="sd">        content_encoding:</span>
<span class="sd">            Optional. Specifies which content encodings have been applied to</span>
<span class="sd">            the blob. This value is returned to the client when the Get Blob</span>
<span class="sd">            (REST API) operation is performed on the blob resource. The client</span>
<span class="sd">            can use this value when returned to decode the blob content.</span>
<span class="sd">        content_language:</span>
<span class="sd">            Optional. Specifies the natural languages used by this resource.</span>
<span class="sd">        content_md5:</span>
<span class="sd">            Optional. An MD5 hash of the blob content. This hash is used to</span>
<span class="sd">            verify the integrity of the blob during transport. When this header</span>
<span class="sd">            is specified, the storage service checks the hash that has arrived</span>
<span class="sd">            with the one that was sent. If the two hashes do not match, the</span>
<span class="sd">            operation will fail with error code 400 (Bad Request).</span>
<span class="sd">        cache_control:</span>
<span class="sd">            Optional. The Blob service stores this value but does not use or</span>
<span class="sd">            modify it.</span>
<span class="sd">        x_ms_blob_content_type: Optional. Set the blob&#39;s content type.</span>
<span class="sd">        x_ms_blob_content_encoding: Optional. Set the blob&#39;s content encoding.</span>
<span class="sd">        x_ms_blob_content_language: Optional. Set the blob&#39;s content language.</span>
<span class="sd">        x_ms_blob_content_md5: Optional. Set the blob&#39;s MD5 hash.</span>
<span class="sd">        x_ms_blob_cache_control: Optional. Sets the blob&#39;s cache control.</span>
<span class="sd">        x_ms_meta_name_values: A dict containing name, value for metadata.</span>
<span class="sd">        x_ms_lease_id: Required if the blob has an active lease.</span>
<span class="sd">        progress_callback:</span>
<span class="sd">            Callback for progress with signature function(current, total) where</span>
<span class="sd">            current is the number of bytes transfered so far, and total is the</span>
<span class="sd">            size of the blob, or None if the total size is unknown.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s">&#39;container_name&#39;</span><span class="p">,</span> <span class="n">container_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s">&#39;blob_name&#39;</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s">&#39;stream&#39;</span><span class="p">,</span> <span class="n">stream</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">count</span> <span class="ow">and</span> <span class="n">count</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">_BLOB_MAX_DATA_SIZE</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">progress_callback</span><span class="p">:</span>
                <span class="n">progress_callback</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">count</span><span class="p">)</span>

            <span class="n">data</span> <span class="o">=</span> <span class="n">stream</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">count</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">put_blob</span><span class="p">(</span><span class="n">container_name</span><span class="p">,</span>
                          <span class="n">blob_name</span><span class="p">,</span>
                          <span class="n">data</span><span class="p">,</span>
                          <span class="s">&#39;BlockBlob&#39;</span><span class="p">,</span>
                          <span class="n">content_encoding</span><span class="p">,</span>
                          <span class="n">content_language</span><span class="p">,</span>
                          <span class="n">content_md5</span><span class="p">,</span>
                          <span class="n">cache_control</span><span class="p">,</span>
                          <span class="n">x_ms_blob_content_type</span><span class="p">,</span>
                          <span class="n">x_ms_blob_content_encoding</span><span class="p">,</span>
                          <span class="n">x_ms_blob_content_language</span><span class="p">,</span>
                          <span class="n">x_ms_blob_content_md5</span><span class="p">,</span>
                          <span class="n">x_ms_blob_cache_control</span><span class="p">,</span>
                          <span class="n">x_ms_meta_name_values</span><span class="p">,</span>
                          <span class="n">x_ms_lease_id</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">progress_callback</span><span class="p">:</span>
                <span class="n">progress_callback</span><span class="p">(</span><span class="n">count</span><span class="p">,</span> <span class="n">count</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">progress_callback</span><span class="p">:</span>
                <span class="n">progress_callback</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">count</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">put_blob</span><span class="p">(</span><span class="n">container_name</span><span class="p">,</span>
                          <span class="n">blob_name</span><span class="p">,</span>
                          <span class="bp">None</span><span class="p">,</span>
                          <span class="s">&#39;BlockBlob&#39;</span><span class="p">,</span>
                          <span class="n">content_encoding</span><span class="p">,</span>
                          <span class="n">content_language</span><span class="p">,</span>
                          <span class="n">content_md5</span><span class="p">,</span>
                          <span class="n">cache_control</span><span class="p">,</span>
                          <span class="n">x_ms_blob_content_type</span><span class="p">,</span>
                          <span class="n">x_ms_blob_content_encoding</span><span class="p">,</span>
                          <span class="n">x_ms_blob_content_language</span><span class="p">,</span>
                          <span class="n">x_ms_blob_content_md5</span><span class="p">,</span>
                          <span class="n">x_ms_blob_cache_control</span><span class="p">,</span>
                          <span class="n">x_ms_meta_name_values</span><span class="p">,</span>
                          <span class="n">x_ms_lease_id</span><span class="p">)</span>

            <span class="n">remain_bytes</span> <span class="o">=</span> <span class="n">count</span>
            <span class="n">block_ids</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">block_index</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">index</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
                <span class="n">request_count</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_BLOB_MAX_CHUNK_DATA_SIZE</span>\
                    <span class="k">if</span> <span class="n">remain_bytes</span> <span class="ow">is</span> <span class="bp">None</span> <span class="k">else</span> <span class="nb">min</span><span class="p">(</span>
                        <span class="n">remain_bytes</span><span class="p">,</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_BLOB_MAX_CHUNK_DATA_SIZE</span><span class="p">)</span>
                <span class="n">data</span> <span class="o">=</span> <span class="n">stream</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">request_count</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">data</span><span class="p">:</span>
                    <span class="n">length</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
                    <span class="n">index</span> <span class="o">+=</span> <span class="n">length</span>
                    <span class="n">remain_bytes</span> <span class="o">=</span> <span class="n">remain_bytes</span> <span class="o">-</span> \
                        <span class="n">length</span> <span class="k">if</span> <span class="n">remain_bytes</span> <span class="k">else</span> <span class="bp">None</span>
                    <span class="n">block_id</span> <span class="o">=</span> <span class="s">&#39;{0:08d}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">block_index</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">put_block</span><span class="p">(</span><span class="n">container_name</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">,</span>
                                   <span class="n">data</span><span class="p">,</span> <span class="n">block_id</span><span class="p">,</span> <span class="n">x_ms_lease_id</span><span class="o">=</span><span class="n">x_ms_lease_id</span><span class="p">)</span>
                    <span class="n">block_ids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">block_id</span><span class="p">)</span>
                    <span class="n">block_index</span> <span class="o">+=</span> <span class="mi">1</span>
                    <span class="k">if</span> <span class="n">progress_callback</span><span class="p">:</span>
                        <span class="n">progress_callback</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="n">count</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">break</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">put_block_list</span><span class="p">(</span><span class="n">container_name</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">,</span> <span class="n">block_ids</span><span class="p">,</span>
                                <span class="n">content_md5</span><span class="p">,</span> <span class="n">x_ms_blob_cache_control</span><span class="p">,</span>
                                <span class="n">x_ms_blob_content_type</span><span class="p">,</span>
                                <span class="n">x_ms_blob_content_encoding</span><span class="p">,</span>
                                <span class="n">x_ms_blob_content_language</span><span class="p">,</span>
                                <span class="n">x_ms_blob_content_md5</span><span class="p">,</span>
                                <span class="n">x_ms_meta_name_values</span><span class="p">,</span>
                                <span class="n">x_ms_lease_id</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="BlobService.put_block_blob_from_bytes"><a class="viewcode-back" href="../../../api/azure.storage.blobservice.html#azure.storage.blobservice.BlobService.put_block_blob_from_bytes">[docs]</a>    <span class="k">def</span> <span class="nf">put_block_blob_from_bytes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">container_name</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">,</span> <span class="n">blob</span><span class="p">,</span>
                                  <span class="n">index</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">count</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">content_encoding</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                                  <span class="n">content_language</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">content_md5</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                                  <span class="n">cache_control</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                                  <span class="n">x_ms_blob_content_type</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                                  <span class="n">x_ms_blob_content_encoding</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                                  <span class="n">x_ms_blob_content_language</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                                  <span class="n">x_ms_blob_content_md5</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                                  <span class="n">x_ms_blob_cache_control</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                                  <span class="n">x_ms_meta_name_values</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                                  <span class="n">x_ms_lease_id</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">progress_callback</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Creates a new block blob from an array of bytes, or updates the content</span>
<span class="sd">        of an existing block blob, with automatic chunking and progress</span>
<span class="sd">        notifications.</span>

<span class="sd">        container_name: Name of existing container.</span>
<span class="sd">        blob_name: Name of blob to create or update.</span>
<span class="sd">        blob: Content of blob as an array of bytes.</span>
<span class="sd">        index: Start index in the array of bytes.</span>
<span class="sd">        count:</span>
<span class="sd">            Number of bytes to upload. Set to None or negative value to upload</span>
<span class="sd">            all bytes starting from index.</span>
<span class="sd">        content_encoding:</span>
<span class="sd">            Optional. Specifies which content encodings have been applied to</span>
<span class="sd">            the blob. This value is returned to the client when the Get Blob</span>
<span class="sd">            (REST API) operation is performed on the blob resource. The client</span>
<span class="sd">            can use this value when returned to decode the blob content.</span>
<span class="sd">        content_language:</span>
<span class="sd">            Optional. Specifies the natural languages used by this resource.</span>
<span class="sd">        content_md5:</span>
<span class="sd">            Optional. An MD5 hash of the blob content. This hash is used to</span>
<span class="sd">            verify the integrity of the blob during transport. When this header</span>
<span class="sd">            is specified, the storage service checks the hash that has arrived</span>
<span class="sd">            with the one that was sent. If the two hashes do not match, the</span>
<span class="sd">            operation will fail with error code 400 (Bad Request).</span>
<span class="sd">        cache_control:</span>
<span class="sd">            Optional. The Blob service stores this value but does not use or</span>
<span class="sd">            modify it.</span>
<span class="sd">        x_ms_blob_content_type: Optional. Set the blob&#39;s content type.</span>
<span class="sd">        x_ms_blob_content_encoding: Optional. Set the blob&#39;s content encoding.</span>
<span class="sd">        x_ms_blob_content_language: Optional. Set the blob&#39;s content language.</span>
<span class="sd">        x_ms_blob_content_md5: Optional. Set the blob&#39;s MD5 hash.</span>
<span class="sd">        x_ms_blob_cache_control: Optional. Sets the blob&#39;s cache control.</span>
<span class="sd">        x_ms_meta_name_values: A dict containing name, value for metadata.</span>
<span class="sd">        x_ms_lease_id: Required if the blob has an active lease.</span>
<span class="sd">        progress_callback:</span>
<span class="sd">            Callback for progress with signature function(current, total) where</span>
<span class="sd">            current is the number of bytes transfered so far, and total is the</span>
<span class="sd">            size of the blob, or None if the total size is unknown.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s">&#39;container_name&#39;</span><span class="p">,</span> <span class="n">container_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s">&#39;blob_name&#39;</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s">&#39;blob&#39;</span><span class="p">,</span> <span class="n">blob</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s">&#39;index&#39;</span><span class="p">,</span> <span class="n">index</span><span class="p">)</span>
        <span class="n">_validate_type_bytes</span><span class="p">(</span><span class="s">&#39;blob&#39;</span><span class="p">,</span> <span class="n">blob</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">index</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="n">_ERROR_VALUE_NEGATIVE</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s">&#39;index&#39;</span><span class="p">))</span>

        <span class="k">if</span> <span class="n">count</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">or</span> <span class="n">count</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">blob</span><span class="p">)</span> <span class="o">-</span> <span class="n">index</span>

        <span class="k">if</span> <span class="n">count</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">_BLOB_MAX_DATA_SIZE</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">progress_callback</span><span class="p">:</span>
                <span class="n">progress_callback</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">count</span><span class="p">)</span>

            <span class="n">data</span> <span class="o">=</span> <span class="n">blob</span><span class="p">[</span><span class="n">index</span><span class="p">:</span> <span class="n">index</span> <span class="o">+</span> <span class="n">count</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">put_blob</span><span class="p">(</span><span class="n">container_name</span><span class="p">,</span>
                          <span class="n">blob_name</span><span class="p">,</span>
                          <span class="n">data</span><span class="p">,</span>
                          <span class="s">&#39;BlockBlob&#39;</span><span class="p">,</span>
                          <span class="n">content_encoding</span><span class="p">,</span>
                          <span class="n">content_language</span><span class="p">,</span>
                          <span class="n">content_md5</span><span class="p">,</span>
                          <span class="n">cache_control</span><span class="p">,</span>
                          <span class="n">x_ms_blob_content_type</span><span class="p">,</span>
                          <span class="n">x_ms_blob_content_encoding</span><span class="p">,</span>
                          <span class="n">x_ms_blob_content_language</span><span class="p">,</span>
                          <span class="n">x_ms_blob_content_md5</span><span class="p">,</span>
                          <span class="n">x_ms_blob_cache_control</span><span class="p">,</span>
                          <span class="n">x_ms_meta_name_values</span><span class="p">,</span>
                          <span class="n">x_ms_lease_id</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">progress_callback</span><span class="p">:</span>
                <span class="n">progress_callback</span><span class="p">(</span><span class="n">count</span><span class="p">,</span> <span class="n">count</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">stream</span> <span class="o">=</span> <span class="n">BytesIO</span><span class="p">(</span><span class="n">blob</span><span class="p">)</span>
            <span class="n">stream</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">put_block_blob_from_file</span><span class="p">(</span><span class="n">container_name</span><span class="p">,</span>
                                          <span class="n">blob_name</span><span class="p">,</span>
                                          <span class="n">stream</span><span class="p">,</span>
                                          <span class="n">count</span><span class="p">,</span>
                                          <span class="n">content_encoding</span><span class="p">,</span>
                                          <span class="n">content_language</span><span class="p">,</span>
                                          <span class="n">content_md5</span><span class="p">,</span>
                                          <span class="n">cache_control</span><span class="p">,</span>
                                          <span class="n">x_ms_blob_content_type</span><span class="p">,</span>
                                          <span class="n">x_ms_blob_content_encoding</span><span class="p">,</span>
                                          <span class="n">x_ms_blob_content_language</span><span class="p">,</span>
                                          <span class="n">x_ms_blob_content_md5</span><span class="p">,</span>
                                          <span class="n">x_ms_blob_cache_control</span><span class="p">,</span>
                                          <span class="n">x_ms_meta_name_values</span><span class="p">,</span>
                                          <span class="n">x_ms_lease_id</span><span class="p">,</span>
                                          <span class="n">progress_callback</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="BlobService.put_block_blob_from_text"><a class="viewcode-back" href="../../../api/azure.storage.blobservice.html#azure.storage.blobservice.BlobService.put_block_blob_from_text">[docs]</a>    <span class="k">def</span> <span class="nf">put_block_blob_from_text</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">container_name</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span>
                                 <span class="n">text_encoding</span><span class="o">=</span><span class="s">&#39;utf-8&#39;</span><span class="p">,</span>
                                 <span class="n">content_encoding</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">content_language</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                                 <span class="n">content_md5</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">cache_control</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                                 <span class="n">x_ms_blob_content_type</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                                 <span class="n">x_ms_blob_content_encoding</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                                 <span class="n">x_ms_blob_content_language</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                                 <span class="n">x_ms_blob_content_md5</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                                 <span class="n">x_ms_blob_cache_control</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                                 <span class="n">x_ms_meta_name_values</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                                 <span class="n">x_ms_lease_id</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">progress_callback</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Creates a new block blob from str/unicode, or updates the content of an</span>
<span class="sd">        existing block blob, with automatic chunking and progress notifications.</span>

<span class="sd">        container_name: Name of existing container.</span>
<span class="sd">        blob_name: Name of blob to create or update.</span>
<span class="sd">        text: Text to upload to the blob.</span>
<span class="sd">        text_encoding: Encoding to use to convert the text to bytes.</span>
<span class="sd">        content_encoding:</span>
<span class="sd">            Optional. Specifies which content encodings have been applied to</span>
<span class="sd">            the blob. This value is returned to the client when the Get Blob</span>
<span class="sd">            (REST API) operation is performed on the blob resource. The client</span>
<span class="sd">            can use this value when returned to decode the blob content.</span>
<span class="sd">        content_language:</span>
<span class="sd">            Optional. Specifies the natural languages used by this resource.</span>
<span class="sd">        content_md5:</span>
<span class="sd">            Optional. An MD5 hash of the blob content. This hash is used to</span>
<span class="sd">            verify the integrity of the blob during transport. When this header</span>
<span class="sd">            is specified, the storage service checks the hash that has arrived</span>
<span class="sd">            with the one that was sent. If the two hashes do not match, the</span>
<span class="sd">            operation will fail with error code 400 (Bad Request).</span>
<span class="sd">        cache_control:</span>
<span class="sd">            Optional. The Blob service stores this value but does not use or</span>
<span class="sd">            modify it.</span>
<span class="sd">        x_ms_blob_content_type: Optional. Set the blob&#39;s content type.</span>
<span class="sd">        x_ms_blob_content_encoding: Optional. Set the blob&#39;s content encoding.</span>
<span class="sd">        x_ms_blob_content_language: Optional. Set the blob&#39;s content language.</span>
<span class="sd">        x_ms_blob_content_md5: Optional. Set the blob&#39;s MD5 hash.</span>
<span class="sd">        x_ms_blob_cache_control: Optional. Sets the blob&#39;s cache control.</span>
<span class="sd">        x_ms_meta_name_values: A dict containing name, value for metadata.</span>
<span class="sd">        x_ms_lease_id: Required if the blob has an active lease.</span>
<span class="sd">        progress_callback:</span>
<span class="sd">            Callback for progress with signature function(current, total) where</span>
<span class="sd">            current is the number of bytes transfered so far, and total is the</span>
<span class="sd">            size of the blob, or None if the total size is unknown.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s">&#39;container_name&#39;</span><span class="p">,</span> <span class="n">container_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s">&#39;blob_name&#39;</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s">&#39;text&#39;</span><span class="p">,</span> <span class="n">text</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">):</span>
            <span class="n">_validate_not_none</span><span class="p">(</span><span class="s">&#39;text_encoding&#39;</span><span class="p">,</span> <span class="n">text_encoding</span><span class="p">)</span>
            <span class="n">text</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">text_encoding</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">put_block_blob_from_bytes</span><span class="p">(</span><span class="n">container_name</span><span class="p">,</span>
                                       <span class="n">blob_name</span><span class="p">,</span>
                                       <span class="n">text</span><span class="p">,</span>
                                       <span class="mi">0</span><span class="p">,</span>
                                       <span class="nb">len</span><span class="p">(</span><span class="n">text</span><span class="p">),</span>
                                       <span class="n">content_encoding</span><span class="p">,</span>
                                       <span class="n">content_language</span><span class="p">,</span>
                                       <span class="n">content_md5</span><span class="p">,</span>
                                       <span class="n">cache_control</span><span class="p">,</span>
                                       <span class="n">x_ms_blob_content_type</span><span class="p">,</span>
                                       <span class="n">x_ms_blob_content_encoding</span><span class="p">,</span>
                                       <span class="n">x_ms_blob_content_language</span><span class="p">,</span>
                                       <span class="n">x_ms_blob_content_md5</span><span class="p">,</span>
                                       <span class="n">x_ms_blob_cache_control</span><span class="p">,</span>
                                       <span class="n">x_ms_meta_name_values</span><span class="p">,</span>
                                       <span class="n">x_ms_lease_id</span><span class="p">,</span>
                                       <span class="n">progress_callback</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="BlobService.put_page_blob_from_path"><a class="viewcode-back" href="../../../api/azure.storage.blobservice.html#azure.storage.blobservice.BlobService.put_page_blob_from_path">[docs]</a>    <span class="k">def</span> <span class="nf">put_page_blob_from_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">container_name</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">,</span> <span class="n">file_path</span><span class="p">,</span>
                                <span class="n">content_encoding</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">content_language</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                                <span class="n">content_md5</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">cache_control</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                                <span class="n">x_ms_blob_content_type</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                                <span class="n">x_ms_blob_content_encoding</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                                <span class="n">x_ms_blob_content_language</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                                <span class="n">x_ms_blob_content_md5</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                                <span class="n">x_ms_blob_cache_control</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                                <span class="n">x_ms_meta_name_values</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                                <span class="n">x_ms_lease_id</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                                <span class="n">x_ms_blob_sequence_number</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                                <span class="n">progress_callback</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Creates a new page blob from a file path, or updates the content of an</span>
<span class="sd">        existing page blob, with automatic chunking and progress notifications.</span>

<span class="sd">        container_name: Name of existing container.</span>
<span class="sd">        blob_name: Name of blob to create or update.</span>
<span class="sd">        file_path: Path of the file to upload as the blob content.</span>
<span class="sd">        content_encoding:</span>
<span class="sd">            Optional. Specifies which content encodings have been applied to</span>
<span class="sd">            the blob. This value is returned to the client when the Get Blob</span>
<span class="sd">            (REST API) operation is performed on the blob resource. The client</span>
<span class="sd">            can use this value when returned to decode the blob content.</span>
<span class="sd">        content_language:</span>
<span class="sd">            Optional. Specifies the natural languages used by this resource.</span>
<span class="sd">        content_md5:</span>
<span class="sd">            Optional. An MD5 hash of the blob content. This hash is used to</span>
<span class="sd">            verify the integrity of the blob during transport. When this header</span>
<span class="sd">            is specified, the storage service checks the hash that has arrived</span>
<span class="sd">            with the one that was sent. If the two hashes do not match, the</span>
<span class="sd">            operation will fail with error code 400 (Bad Request).</span>
<span class="sd">        cache_control:</span>
<span class="sd">            Optional. The Blob service stores this value but does not use or</span>
<span class="sd">            modify it.</span>
<span class="sd">        x_ms_blob_content_type: Optional. Set the blob&#39;s content type.</span>
<span class="sd">        x_ms_blob_content_encoding: Optional. Set the blob&#39;s content encoding.</span>
<span class="sd">        x_ms_blob_content_language: Optional. Set the blob&#39;s content language.</span>
<span class="sd">        x_ms_blob_content_md5: Optional. Set the blob&#39;s MD5 hash.</span>
<span class="sd">        x_ms_blob_cache_control: Optional. Sets the blob&#39;s cache control.</span>
<span class="sd">        x_ms_meta_name_values: A dict containing name, value for metadata.</span>
<span class="sd">        x_ms_lease_id: Required if the blob has an active lease.</span>
<span class="sd">        x_ms_blob_sequence_number:</span>
<span class="sd">            Optional. Set for page blobs only. The sequence number is a</span>
<span class="sd">            user-controlled value that you can use to track requests. The</span>
<span class="sd">            value of the sequence number must be between 0 and 2^63 - 1. The</span>
<span class="sd">            default value is 0.</span>
<span class="sd">        progress_callback:</span>
<span class="sd">            Callback for progress with signature function(current, total) where</span>
<span class="sd">            current is the number of bytes transfered so far, and total is the</span>
<span class="sd">            size of the blob, or None if the total size is unknown.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s">&#39;container_name&#39;</span><span class="p">,</span> <span class="n">container_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s">&#39;blob_name&#39;</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s">&#39;file_path&#39;</span><span class="p">,</span> <span class="n">file_path</span><span class="p">)</span>

        <span class="n">count</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="n">getsize</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="s">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">stream</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">put_page_blob_from_file</span><span class="p">(</span><span class="n">container_name</span><span class="p">,</span>
                                         <span class="n">blob_name</span><span class="p">,</span>
                                         <span class="n">stream</span><span class="p">,</span>
                                         <span class="n">count</span><span class="p">,</span>
                                         <span class="n">content_encoding</span><span class="p">,</span>
                                         <span class="n">content_language</span><span class="p">,</span>
                                         <span class="n">content_md5</span><span class="p">,</span>
                                         <span class="n">cache_control</span><span class="p">,</span>
                                         <span class="n">x_ms_blob_content_type</span><span class="p">,</span>
                                         <span class="n">x_ms_blob_content_encoding</span><span class="p">,</span>
                                         <span class="n">x_ms_blob_content_language</span><span class="p">,</span>
                                         <span class="n">x_ms_blob_content_md5</span><span class="p">,</span>
                                         <span class="n">x_ms_blob_cache_control</span><span class="p">,</span>
                                         <span class="n">x_ms_meta_name_values</span><span class="p">,</span>
                                         <span class="n">x_ms_lease_id</span><span class="p">,</span>
                                         <span class="n">x_ms_blob_sequence_number</span><span class="p">,</span>
                                         <span class="n">progress_callback</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="BlobService.put_page_blob_from_file"><a class="viewcode-back" href="../../../api/azure.storage.blobservice.html#azure.storage.blobservice.BlobService.put_page_blob_from_file">[docs]</a>    <span class="k">def</span> <span class="nf">put_page_blob_from_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">container_name</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">,</span> <span class="n">stream</span><span class="p">,</span> <span class="n">count</span><span class="p">,</span>
                                <span class="n">content_encoding</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">content_language</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                                <span class="n">content_md5</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">cache_control</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                                <span class="n">x_ms_blob_content_type</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                                <span class="n">x_ms_blob_content_encoding</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                                <span class="n">x_ms_blob_content_language</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                                <span class="n">x_ms_blob_content_md5</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                                <span class="n">x_ms_blob_cache_control</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                                <span class="n">x_ms_meta_name_values</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                                <span class="n">x_ms_lease_id</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                                <span class="n">x_ms_blob_sequence_number</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                                <span class="n">progress_callback</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Creates a new page blob from a file/stream, or updates the content of an</span>
<span class="sd">        existing page blob, with automatic chunking and progress notifications.</span>

<span class="sd">        container_name: Name of existing container.</span>
<span class="sd">        blob_name: Name of blob to create or update.</span>
<span class="sd">        stream: Opened file/stream to upload as the blob content.</span>
<span class="sd">        count:</span>
<span class="sd">            Number of bytes to read from the stream. This is required, a page</span>
<span class="sd">            blob cannot be created if the count is unknown.</span>
<span class="sd">        content_encoding:</span>
<span class="sd">            Optional. Specifies which content encodings have been applied to</span>
<span class="sd">            the blob. This value is returned to the client when the Get Blob</span>
<span class="sd">            (REST API) operation is performed on the blob resource. The client</span>
<span class="sd">            can use this value when returned to decode the blob content.</span>
<span class="sd">        content_language:</span>
<span class="sd">            Optional. Specifies the natural languages used by this resource.</span>
<span class="sd">        content_md5:</span>
<span class="sd">            Optional. An MD5 hash of the blob content. This hash is used to</span>
<span class="sd">            verify the integrity of the blob during transport. When this header</span>
<span class="sd">            is specified, the storage service checks the hash that has arrived</span>
<span class="sd">            with the one that was sent. If the two hashes do not match, the</span>
<span class="sd">            operation will fail with error code 400 (Bad Request).</span>
<span class="sd">        cache_control:</span>
<span class="sd">            Optional. The Blob service stores this value but does not use or</span>
<span class="sd">            modify it.</span>
<span class="sd">        x_ms_blob_content_type: Optional. Set the blob&#39;s content type.</span>
<span class="sd">        x_ms_blob_content_encoding: Optional. Set the blob&#39;s content encoding.</span>
<span class="sd">        x_ms_blob_content_language: Optional. Set the blob&#39;s content language.</span>
<span class="sd">        x_ms_blob_content_md5: Optional. Set the blob&#39;s MD5 hash.</span>
<span class="sd">        x_ms_blob_cache_control: Optional. Sets the blob&#39;s cache control.</span>
<span class="sd">        x_ms_meta_name_values: A dict containing name, value for metadata.</span>
<span class="sd">        x_ms_lease_id: Required if the blob has an active lease.</span>
<span class="sd">        x_ms_blob_sequence_number:</span>
<span class="sd">            Optional. Set for page blobs only. The sequence number is a</span>
<span class="sd">            user-controlled value that you can use to track requests. The</span>
<span class="sd">            value of the sequence number must be between 0 and 2^63 - 1. The</span>
<span class="sd">            default value is 0.</span>
<span class="sd">        progress_callback:</span>
<span class="sd">            Callback for progress with signature function(current, total) where</span>
<span class="sd">            current is the number of bytes transfered so far, and total is the</span>
<span class="sd">            size of the blob, or None if the total size is unknown.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s">&#39;container_name&#39;</span><span class="p">,</span> <span class="n">container_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s">&#39;blob_name&#39;</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s">&#39;stream&#39;</span><span class="p">,</span> <span class="n">stream</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s">&#39;count&#39;</span><span class="p">,</span> <span class="n">count</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">count</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="n">_ERROR_VALUE_NEGATIVE</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s">&#39;count&#39;</span><span class="p">))</span>

        <span class="k">if</span> <span class="n">count</span> <span class="o">%</span> <span class="n">_PAGE_SIZE</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="n">_ERROR_PAGE_BLOB_SIZE_ALIGNMENT</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">count</span><span class="p">))</span>

        <span class="k">if</span> <span class="n">progress_callback</span><span class="p">:</span>
            <span class="n">progress_callback</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">count</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">put_blob</span><span class="p">(</span><span class="n">container_name</span><span class="p">,</span>
                      <span class="n">blob_name</span><span class="p">,</span>
                      <span class="n">b</span><span class="s">&#39;&#39;</span><span class="p">,</span>
                      <span class="s">&#39;PageBlob&#39;</span><span class="p">,</span>
                      <span class="n">content_encoding</span><span class="p">,</span>
                      <span class="n">content_language</span><span class="p">,</span>
                      <span class="n">content_md5</span><span class="p">,</span>
                      <span class="n">cache_control</span><span class="p">,</span>
                      <span class="n">x_ms_blob_content_type</span><span class="p">,</span>
                      <span class="n">x_ms_blob_content_encoding</span><span class="p">,</span>
                      <span class="n">x_ms_blob_content_language</span><span class="p">,</span>
                      <span class="n">x_ms_blob_content_md5</span><span class="p">,</span>
                      <span class="n">x_ms_blob_cache_control</span><span class="p">,</span>
                      <span class="n">x_ms_meta_name_values</span><span class="p">,</span>
                      <span class="n">x_ms_lease_id</span><span class="p">,</span>
                      <span class="n">count</span><span class="p">,</span>
                      <span class="n">x_ms_blob_sequence_number</span><span class="p">)</span>

        <span class="n">remain_bytes</span> <span class="o">=</span> <span class="n">count</span>
        <span class="n">page_start</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
            <span class="n">request_count</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">remain_bytes</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_BLOB_MAX_CHUNK_DATA_SIZE</span><span class="p">)</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">stream</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">request_count</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">data</span><span class="p">:</span>
                <span class="n">length</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
                <span class="n">remain_bytes</span> <span class="o">=</span> <span class="n">remain_bytes</span> <span class="o">-</span> <span class="n">length</span>
                <span class="n">page_end</span> <span class="o">=</span> <span class="n">page_start</span> <span class="o">+</span> <span class="n">length</span> <span class="o">-</span> <span class="mi">1</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">put_page</span><span class="p">(</span><span class="n">container_name</span><span class="p">,</span>
                              <span class="n">blob_name</span><span class="p">,</span>
                              <span class="n">data</span><span class="p">,</span>
                              <span class="s">&#39;bytes={0}-{1}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">page_start</span><span class="p">,</span> <span class="n">page_end</span><span class="p">),</span>
                              <span class="s">&#39;update&#39;</span><span class="p">,</span>
                              <span class="n">x_ms_lease_id</span><span class="o">=</span><span class="n">x_ms_lease_id</span><span class="p">)</span>
                <span class="n">page_start</span> <span class="o">=</span> <span class="n">page_start</span> <span class="o">+</span> <span class="n">length</span>

                <span class="k">if</span> <span class="n">progress_callback</span><span class="p">:</span>
                    <span class="n">progress_callback</span><span class="p">(</span><span class="n">page_start</span><span class="p">,</span> <span class="n">count</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">break</span>
</div>
<div class="viewcode-block" id="BlobService.put_page_blob_from_bytes"><a class="viewcode-back" href="../../../api/azure.storage.blobservice.html#azure.storage.blobservice.BlobService.put_page_blob_from_bytes">[docs]</a>    <span class="k">def</span> <span class="nf">put_page_blob_from_bytes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">container_name</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">,</span> <span class="n">blob</span><span class="p">,</span>
                                 <span class="n">index</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">count</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">content_encoding</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                                 <span class="n">content_language</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">content_md5</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                                 <span class="n">cache_control</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                                 <span class="n">x_ms_blob_content_type</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                                 <span class="n">x_ms_blob_content_encoding</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                                 <span class="n">x_ms_blob_content_language</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                                 <span class="n">x_ms_blob_content_md5</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                                 <span class="n">x_ms_blob_cache_control</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                                 <span class="n">x_ms_meta_name_values</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                                 <span class="n">x_ms_lease_id</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                                 <span class="n">x_ms_blob_sequence_number</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                                 <span class="n">progress_callback</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Creates a new page blob from an array of bytes, or updates the content</span>
<span class="sd">        of an existing page blob, with automatic chunking and progress</span>
<span class="sd">        notifications.</span>

<span class="sd">        container_name: Name of existing container.</span>
<span class="sd">        blob_name: Name of blob to create or update.</span>
<span class="sd">        blob: Content of blob as an array of bytes.</span>
<span class="sd">        index: Start index in the array of bytes.</span>
<span class="sd">        count:</span>
<span class="sd">            Number of bytes to upload. Set to None or negative value to upload</span>
<span class="sd">            all bytes starting from index.</span>
<span class="sd">        content_encoding:</span>
<span class="sd">            Optional. Specifies which content encodings have been applied to</span>
<span class="sd">            the blob. This value is returned to the client when the Get Blob</span>
<span class="sd">            (REST API) operation is performed on the blob resource. The client</span>
<span class="sd">            can use this value when returned to decode the blob content.</span>
<span class="sd">        content_language:</span>
<span class="sd">            Optional. Specifies the natural languages used by this resource.</span>
<span class="sd">        content_md5:</span>
<span class="sd">            Optional. An MD5 hash of the blob content. This hash is used to</span>
<span class="sd">            verify the integrity of the blob during transport. When this header</span>
<span class="sd">            is specified, the storage service checks the hash that has arrived</span>
<span class="sd">            with the one that was sent. If the two hashes do not match, the</span>
<span class="sd">            operation will fail with error code 400 (Bad Request).</span>
<span class="sd">        cache_control:</span>
<span class="sd">            Optional. The Blob service stores this value but does not use or</span>
<span class="sd">            modify it.</span>
<span class="sd">        x_ms_blob_content_type: Optional. Set the blob&#39;s content type.</span>
<span class="sd">        x_ms_blob_content_encoding: Optional. Set the blob&#39;s content encoding.</span>
<span class="sd">        x_ms_blob_content_language: Optional. Set the blob&#39;s content language.</span>
<span class="sd">        x_ms_blob_content_md5: Optional. Set the blob&#39;s MD5 hash.</span>
<span class="sd">        x_ms_blob_cache_control: Optional. Sets the blob&#39;s cache control.</span>
<span class="sd">        x_ms_meta_name_values: A dict containing name, value for metadata.</span>
<span class="sd">        x_ms_lease_id: Required if the blob has an active lease.</span>
<span class="sd">        x_ms_blob_sequence_number:</span>
<span class="sd">            Optional. Set for page blobs only. The sequence number is a</span>
<span class="sd">            user-controlled value that you can use to track requests. The</span>
<span class="sd">            value of the sequence number must be between 0 and 2^63 - 1. The</span>
<span class="sd">            default value is 0.</span>
<span class="sd">        progress_callback:</span>
<span class="sd">            Callback for progress with signature function(current, total) where</span>
<span class="sd">            current is the number of bytes transfered so far, and total is the</span>
<span class="sd">            size of the blob, or None if the total size is unknown.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s">&#39;container_name&#39;</span><span class="p">,</span> <span class="n">container_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s">&#39;blob_name&#39;</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s">&#39;blob&#39;</span><span class="p">,</span> <span class="n">blob</span><span class="p">)</span>
        <span class="n">_validate_type_bytes</span><span class="p">(</span><span class="s">&#39;blob&#39;</span><span class="p">,</span> <span class="n">blob</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">index</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="n">_ERROR_VALUE_NEGATIVE</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s">&#39;index&#39;</span><span class="p">))</span>

        <span class="k">if</span> <span class="n">count</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">or</span> <span class="n">count</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">blob</span><span class="p">)</span> <span class="o">-</span> <span class="n">index</span>

        <span class="n">stream</span> <span class="o">=</span> <span class="n">BytesIO</span><span class="p">(</span><span class="n">blob</span><span class="p">)</span>
        <span class="n">stream</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">put_page_blob_from_file</span><span class="p">(</span><span class="n">container_name</span><span class="p">,</span>
                                     <span class="n">blob_name</span><span class="p">,</span>
                                     <span class="n">stream</span><span class="p">,</span>
                                     <span class="n">count</span><span class="p">,</span>
                                     <span class="n">content_encoding</span><span class="p">,</span>
                                     <span class="n">content_language</span><span class="p">,</span>
                                     <span class="n">content_md5</span><span class="p">,</span>
                                     <span class="n">cache_control</span><span class="p">,</span>
                                     <span class="n">x_ms_blob_content_type</span><span class="p">,</span>
                                     <span class="n">x_ms_blob_content_encoding</span><span class="p">,</span>
                                     <span class="n">x_ms_blob_content_language</span><span class="p">,</span>
                                     <span class="n">x_ms_blob_content_md5</span><span class="p">,</span>
                                     <span class="n">x_ms_blob_cache_control</span><span class="p">,</span>
                                     <span class="n">x_ms_meta_name_values</span><span class="p">,</span>
                                     <span class="n">x_ms_lease_id</span><span class="p">,</span>
                                     <span class="n">x_ms_blob_sequence_number</span><span class="p">,</span>
                                     <span class="n">progress_callback</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="BlobService.get_blob"><a class="viewcode-back" href="../../../api/azure.storage.blobservice.html#azure.storage.blobservice.BlobService.get_blob">[docs]</a>    <span class="k">def</span> <span class="nf">get_blob</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">container_name</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">,</span> <span class="n">snapshot</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                 <span class="n">x_ms_range</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">x_ms_lease_id</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                 <span class="n">x_ms_range_get_content_md5</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Reads or downloads a blob from the system, including its metadata and</span>
<span class="sd">        properties.</span>

<span class="sd">        See get_blob_to_* for high level functions that handle the download</span>
<span class="sd">        of large blobs with automatic chunking and progress notifications.</span>

<span class="sd">        container_name: Name of existing container.</span>
<span class="sd">        blob_name: Name of existing blob.</span>
<span class="sd">        snapshot:</span>
<span class="sd">            Optional. The snapshot parameter is an opaque DateTime value that,</span>
<span class="sd">            when present, specifies the blob snapshot to retrieve.</span>
<span class="sd">        x_ms_range:</span>
<span class="sd">            Optional. Return only the bytes of the blob in the specified range.</span>
<span class="sd">        x_ms_lease_id: Required if the blob has an active lease.</span>
<span class="sd">        x_ms_range_get_content_md5:</span>
<span class="sd">            Optional. When this header is set to true and specified together</span>
<span class="sd">            with the Range header, the service returns the MD5 hash for the</span>
<span class="sd">            range, as long as the range is less than or equal to 4 MB in size.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s">&#39;container_name&#39;</span><span class="p">,</span> <span class="n">container_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s">&#39;blob_name&#39;</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">)</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">HTTPRequest</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="s">&#39;GET&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">host</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_host</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="s">&#39;/&#39;</span> <span class="o">+</span> <span class="n">_str</span><span class="p">(</span><span class="n">container_name</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39;/&#39;</span> <span class="o">+</span> <span class="n">_str</span><span class="p">(</span><span class="n">blob_name</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39;&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">headers</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">(</span><span class="s">&#39;x-ms-range&#39;</span><span class="p">,</span> <span class="n">_str_or_none</span><span class="p">(</span><span class="n">x_ms_range</span><span class="p">)),</span>
            <span class="p">(</span><span class="s">&#39;x-ms-lease-id&#39;</span><span class="p">,</span> <span class="n">_str_or_none</span><span class="p">(</span><span class="n">x_ms_lease_id</span><span class="p">)),</span>
            <span class="p">(</span><span class="s">&#39;x-ms-range-get-content-md5&#39;</span><span class="p">,</span>
             <span class="n">_str_or_none</span><span class="p">(</span><span class="n">x_ms_range_get_content_md5</span><span class="p">))</span>
        <span class="p">]</span>
        <span class="n">request</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="p">[(</span><span class="s">&#39;snapshot&#39;</span><span class="p">,</span> <span class="n">_str_or_none</span><span class="p">(</span><span class="n">snapshot</span><span class="p">))]</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="n">request</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="n">_update_request_uri_query_local_storage</span><span class="p">(</span>
            <span class="n">request</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_local_storage</span><span class="p">)</span>
        <span class="n">request</span><span class="o">.</span><span class="n">headers</span> <span class="o">=</span> <span class="n">_update_storage_blob_header</span><span class="p">(</span>
            <span class="n">request</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">account_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">account_key</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_perform_request</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">_create_blob_result</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="BlobService.get_blob_to_path"><a class="viewcode-back" href="../../../api/azure.storage.blobservice.html#azure.storage.blobservice.BlobService.get_blob_to_path">[docs]</a>    <span class="k">def</span> <span class="nf">get_blob_to_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">container_name</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">,</span> <span class="n">file_path</span><span class="p">,</span>
                         <span class="n">open_mode</span><span class="o">=</span><span class="s">&#39;wb&#39;</span><span class="p">,</span> <span class="n">snapshot</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">x_ms_lease_id</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                         <span class="n">progress_callback</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Downloads a blob to a file path, with automatic chunking and progress</span>
<span class="sd">        notifications.</span>

<span class="sd">        container_name: Name of existing container.</span>
<span class="sd">        blob_name: Name of existing blob.</span>
<span class="sd">        file_path: Path of file to write to.</span>
<span class="sd">        open_mode: Mode to use when opening the file.</span>
<span class="sd">        snapshot:</span>
<span class="sd">            Optional. The snapshot parameter is an opaque DateTime value that,</span>
<span class="sd">            when present, specifies the blob snapshot to retrieve.</span>
<span class="sd">        x_ms_lease_id: Required if the blob has an active lease.</span>
<span class="sd">        progress_callback:</span>
<span class="sd">            Callback for progress with signature function(current, total) where</span>
<span class="sd">            current is the number of bytes transfered so far, and total is the</span>
<span class="sd">            size of the blob.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s">&#39;container_name&#39;</span><span class="p">,</span> <span class="n">container_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s">&#39;blob_name&#39;</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s">&#39;file_path&#39;</span><span class="p">,</span> <span class="n">file_path</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s">&#39;open_mode&#39;</span><span class="p">,</span> <span class="n">open_mode</span><span class="p">)</span>

        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="n">open_mode</span><span class="p">)</span> <span class="k">as</span> <span class="n">stream</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get_blob_to_file</span><span class="p">(</span><span class="n">container_name</span><span class="p">,</span>
                                  <span class="n">blob_name</span><span class="p">,</span>
                                  <span class="n">stream</span><span class="p">,</span>
                                  <span class="n">snapshot</span><span class="p">,</span>
                                  <span class="n">x_ms_lease_id</span><span class="p">,</span>
                                  <span class="n">progress_callback</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="BlobService.get_blob_to_file"><a class="viewcode-back" href="../../../api/azure.storage.blobservice.html#azure.storage.blobservice.BlobService.get_blob_to_file">[docs]</a>    <span class="k">def</span> <span class="nf">get_blob_to_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">container_name</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">,</span> <span class="n">stream</span><span class="p">,</span>
                         <span class="n">snapshot</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">x_ms_lease_id</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                         <span class="n">progress_callback</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Downloads a blob to a file/stream, with automatic chunking and progress</span>
<span class="sd">        notifications.</span>

<span class="sd">        container_name: Name of existing container.</span>
<span class="sd">        blob_name: Name of existing blob.</span>
<span class="sd">        stream: Opened file/stream to write to.</span>
<span class="sd">        snapshot:</span>
<span class="sd">            Optional. The snapshot parameter is an opaque DateTime value that,</span>
<span class="sd">            when present, specifies the blob snapshot to retrieve.</span>
<span class="sd">        x_ms_lease_id: Required if the blob has an active lease.</span>
<span class="sd">        progress_callback:</span>
<span class="sd">            Callback for progress with signature function(current, total) where</span>
<span class="sd">            current is the number of bytes transfered so far, and total is the</span>
<span class="sd">            size of the blob.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s">&#39;container_name&#39;</span><span class="p">,</span> <span class="n">container_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s">&#39;blob_name&#39;</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s">&#39;stream&#39;</span><span class="p">,</span> <span class="n">stream</span><span class="p">)</span>

        <span class="n">props</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_blob_properties</span><span class="p">(</span><span class="n">container_name</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">)</span>
        <span class="n">blob_size</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">props</span><span class="p">[</span><span class="s">&#39;content-length&#39;</span><span class="p">])</span>

        <span class="k">if</span> <span class="n">blob_size</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">_BLOB_MAX_DATA_SIZE</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">progress_callback</span><span class="p">:</span>
                <span class="n">progress_callback</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">blob_size</span><span class="p">)</span>

            <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_blob</span><span class="p">(</span><span class="n">container_name</span><span class="p">,</span>
                                 <span class="n">blob_name</span><span class="p">,</span>
                                 <span class="n">snapshot</span><span class="p">,</span>
                                 <span class="n">x_ms_lease_id</span><span class="o">=</span><span class="n">x_ms_lease_id</span><span class="p">)</span>

            <span class="n">stream</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">progress_callback</span><span class="p">:</span>
                <span class="n">progress_callback</span><span class="p">(</span><span class="n">blob_size</span><span class="p">,</span> <span class="n">blob_size</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">progress_callback</span><span class="p">:</span>
                <span class="n">progress_callback</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">blob_size</span><span class="p">)</span>

            <span class="n">index</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">while</span> <span class="n">index</span> <span class="o">&lt;</span> <span class="n">blob_size</span><span class="p">:</span>
                <span class="n">chunk_range</span> <span class="o">=</span> <span class="s">&#39;bytes={0}-{1}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                    <span class="n">index</span><span class="p">,</span>
                    <span class="n">index</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_BLOB_MAX_CHUNK_DATA_SIZE</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
                <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_blob</span><span class="p">(</span>
                    <span class="n">container_name</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">,</span> <span class="n">x_ms_range</span><span class="o">=</span><span class="n">chunk_range</span><span class="p">)</span>
                <span class="n">length</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
                <span class="n">index</span> <span class="o">+=</span> <span class="n">length</span>
                <span class="k">if</span> <span class="n">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">stream</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">progress_callback</span><span class="p">:</span>
                        <span class="n">progress_callback</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="n">blob_size</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">length</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">_BLOB_MAX_CHUNK_DATA_SIZE</span><span class="p">:</span>
                        <span class="k">break</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">break</span>
</div>
<div class="viewcode-block" id="BlobService.get_blob_to_bytes"><a class="viewcode-back" href="../../../api/azure.storage.blobservice.html#azure.storage.blobservice.BlobService.get_blob_to_bytes">[docs]</a>    <span class="k">def</span> <span class="nf">get_blob_to_bytes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">container_name</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">,</span> <span class="n">snapshot</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                          <span class="n">x_ms_lease_id</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">progress_callback</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Downloads a blob as an array of bytes, with automatic chunking and</span>
<span class="sd">        progress notifications.</span>

<span class="sd">        container_name: Name of existing container.</span>
<span class="sd">        blob_name: Name of existing blob.</span>
<span class="sd">        snapshot:</span>
<span class="sd">            Optional. The snapshot parameter is an opaque DateTime value that,</span>
<span class="sd">            when present, specifies the blob snapshot to retrieve.</span>
<span class="sd">        x_ms_lease_id: Required if the blob has an active lease.</span>
<span class="sd">        progress_callback:</span>
<span class="sd">            Callback for progress with signature function(current, total) where</span>
<span class="sd">            current is the number of bytes transfered so far, and total is the</span>
<span class="sd">            size of the blob.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s">&#39;container_name&#39;</span><span class="p">,</span> <span class="n">container_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s">&#39;blob_name&#39;</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">)</span>

        <span class="n">stream</span> <span class="o">=</span> <span class="n">BytesIO</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">get_blob_to_file</span><span class="p">(</span><span class="n">container_name</span><span class="p">,</span>
                              <span class="n">blob_name</span><span class="p">,</span>
                              <span class="n">stream</span><span class="p">,</span>
                              <span class="n">snapshot</span><span class="p">,</span>
                              <span class="n">x_ms_lease_id</span><span class="p">,</span>
                              <span class="n">progress_callback</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">stream</span><span class="o">.</span><span class="n">getvalue</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="BlobService.get_blob_to_text"><a class="viewcode-back" href="../../../api/azure.storage.blobservice.html#azure.storage.blobservice.BlobService.get_blob_to_text">[docs]</a>    <span class="k">def</span> <span class="nf">get_blob_to_text</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">container_name</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">,</span> <span class="n">text_encoding</span><span class="o">=</span><span class="s">&#39;utf-8&#39;</span><span class="p">,</span>
                         <span class="n">snapshot</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">x_ms_lease_id</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                         <span class="n">progress_callback</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Downloads a blob as unicode text, with automatic chunking and progress</span>
<span class="sd">        notifications.</span>

<span class="sd">        container_name: Name of existing container.</span>
<span class="sd">        blob_name: Name of existing blob.</span>
<span class="sd">        text_encoding: Encoding to use when decoding the blob data.</span>
<span class="sd">        snapshot:</span>
<span class="sd">            Optional. The snapshot parameter is an opaque DateTime value that,</span>
<span class="sd">            when present, specifies the blob snapshot to retrieve.</span>
<span class="sd">        x_ms_lease_id: Required if the blob has an active lease.</span>
<span class="sd">        progress_callback:</span>
<span class="sd">            Callback for progress with signature function(current, total) where</span>
<span class="sd">            current is the number of bytes transfered so far, and total is the</span>
<span class="sd">            size of the blob.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s">&#39;container_name&#39;</span><span class="p">,</span> <span class="n">container_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s">&#39;blob_name&#39;</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s">&#39;text_encoding&#39;</span><span class="p">,</span> <span class="n">text_encoding</span><span class="p">)</span>

        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_blob_to_bytes</span><span class="p">(</span><span class="n">container_name</span><span class="p">,</span>
                                        <span class="n">blob_name</span><span class="p">,</span>
                                        <span class="n">snapshot</span><span class="p">,</span>
                                        <span class="n">x_ms_lease_id</span><span class="p">,</span>
                                        <span class="n">progress_callback</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">result</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="n">text_encoding</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="BlobService.get_blob_metadata"><a class="viewcode-back" href="../../../api/azure.storage.blobservice.html#azure.storage.blobservice.BlobService.get_blob_metadata">[docs]</a>    <span class="k">def</span> <span class="nf">get_blob_metadata</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">container_name</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">,</span> <span class="n">snapshot</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                          <span class="n">x_ms_lease_id</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Returns all user-defined metadata for the specified blob or snapshot.</span>

<span class="sd">        container_name: Name of existing container.</span>
<span class="sd">        blob_name: Name of existing blob.</span>
<span class="sd">        snapshot:</span>
<span class="sd">            Optional. The snapshot parameter is an opaque DateTime value that,</span>
<span class="sd">            when present, specifies the blob snapshot to retrieve.</span>
<span class="sd">        x_ms_lease_id: Required if the blob has an active lease.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s">&#39;container_name&#39;</span><span class="p">,</span> <span class="n">container_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s">&#39;blob_name&#39;</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">)</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">HTTPRequest</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="s">&#39;GET&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">host</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_host</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="s">&#39;/&#39;</span> <span class="o">+</span> \
            <span class="n">_str</span><span class="p">(</span><span class="n">container_name</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39;/&#39;</span> <span class="o">+</span> <span class="n">_str</span><span class="p">(</span><span class="n">blob_name</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39;?comp=metadata&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">headers</span> <span class="o">=</span> <span class="p">[(</span><span class="s">&#39;x-ms-lease-id&#39;</span><span class="p">,</span> <span class="n">_str_or_none</span><span class="p">(</span><span class="n">x_ms_lease_id</span><span class="p">))]</span>
        <span class="n">request</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="p">[(</span><span class="s">&#39;snapshot&#39;</span><span class="p">,</span> <span class="n">_str_or_none</span><span class="p">(</span><span class="n">snapshot</span><span class="p">))]</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="n">request</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="n">_update_request_uri_query_local_storage</span><span class="p">(</span>
            <span class="n">request</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_local_storage</span><span class="p">)</span>
        <span class="n">request</span><span class="o">.</span><span class="n">headers</span> <span class="o">=</span> <span class="n">_update_storage_blob_header</span><span class="p">(</span>
            <span class="n">request</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">account_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">account_key</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_perform_request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">_parse_response_for_dict_prefix</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">prefixes</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;x-ms-meta&#39;</span><span class="p">])</span>
</div>
<div class="viewcode-block" id="BlobService.set_blob_metadata"><a class="viewcode-back" href="../../../api/azure.storage.blobservice.html#azure.storage.blobservice.BlobService.set_blob_metadata">[docs]</a>    <span class="k">def</span> <span class="nf">set_blob_metadata</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">container_name</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">,</span>
                          <span class="n">x_ms_meta_name_values</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">x_ms_lease_id</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Sets user-defined metadata for the specified blob as one or more</span>
<span class="sd">        name-value pairs.</span>

<span class="sd">        container_name: Name of existing container.</span>
<span class="sd">        blob_name: Name of existing blob.</span>
<span class="sd">        x_ms_meta_name_values: Dict containing name and value pairs.</span>
<span class="sd">        x_ms_lease_id: Required if the blob has an active lease.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s">&#39;container_name&#39;</span><span class="p">,</span> <span class="n">container_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s">&#39;blob_name&#39;</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">)</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">HTTPRequest</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="s">&#39;PUT&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">host</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_host</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="s">&#39;/&#39;</span> <span class="o">+</span> \
            <span class="n">_str</span><span class="p">(</span><span class="n">container_name</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39;/&#39;</span> <span class="o">+</span> <span class="n">_str</span><span class="p">(</span><span class="n">blob_name</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39;?comp=metadata&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">headers</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">(</span><span class="s">&#39;x-ms-meta-name-values&#39;</span><span class="p">,</span> <span class="n">x_ms_meta_name_values</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&#39;x-ms-lease-id&#39;</span><span class="p">,</span> <span class="n">_str_or_none</span><span class="p">(</span><span class="n">x_ms_lease_id</span><span class="p">))</span>
        <span class="p">]</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="n">request</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="n">_update_request_uri_query_local_storage</span><span class="p">(</span>
            <span class="n">request</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_local_storage</span><span class="p">)</span>
        <span class="n">request</span><span class="o">.</span><span class="n">headers</span> <span class="o">=</span> <span class="n">_update_storage_blob_header</span><span class="p">(</span>
            <span class="n">request</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">account_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">account_key</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_perform_request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="BlobService.lease_blob"><a class="viewcode-back" href="../../../api/azure.storage.blobservice.html#azure.storage.blobservice.BlobService.lease_blob">[docs]</a>    <span class="k">def</span> <span class="nf">lease_blob</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">container_name</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">,</span> <span class="n">x_ms_lease_action</span><span class="p">,</span>
                   <span class="n">x_ms_lease_id</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">x_ms_lease_duration</span><span class="o">=</span><span class="mi">60</span><span class="p">,</span>
                   <span class="n">x_ms_lease_break_period</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">x_ms_proposed_lease_id</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Establishes and manages a one-minute lock on a blob for write</span>
<span class="sd">        operations.</span>

<span class="sd">        container_name: Name of existing container.</span>
<span class="sd">        blob_name: Name of existing blob.</span>
<span class="sd">        x_ms_lease_action:</span>
<span class="sd">            Required. Possible values: acquire|renew|release|break|change</span>
<span class="sd">        x_ms_lease_id: Required if the blob has an active lease.</span>
<span class="sd">        x_ms_lease_duration:</span>
<span class="sd">            Specifies the duration of the lease, in seconds, or negative one</span>
<span class="sd">            (-1) for a lease that never expires. A non-infinite lease can be</span>
<span class="sd">            between 15 and 60 seconds. A lease duration cannot be changed</span>
<span class="sd">            using renew or change. For backwards compatibility, the default is</span>
<span class="sd">            60, and the value is only used on an acquire operation.</span>
<span class="sd">        x_ms_lease_break_period:</span>
<span class="sd">            Optional. For a break operation, this is the proposed duration of</span>
<span class="sd">            seconds that the lease should continue before it is broken, between</span>
<span class="sd">            0 and 60 seconds. This break period is only used if it is shorter</span>
<span class="sd">            than the time remaining on the lease. If longer, the time remaining</span>
<span class="sd">            on the lease is used. A new lease will not be available before the</span>
<span class="sd">            break period has expired, but the lease may be held for longer than</span>
<span class="sd">            the break period. If this header does not appear with a break</span>
<span class="sd">            operation, a fixed-duration lease breaks after the remaining lease</span>
<span class="sd">            period elapses, and an infinite lease breaks immediately.</span>
<span class="sd">        x_ms_proposed_lease_id:</span>
<span class="sd">            Optional for acquire, required for change. Proposed lease ID, in a</span>
<span class="sd">            GUID string format.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s">&#39;container_name&#39;</span><span class="p">,</span> <span class="n">container_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s">&#39;blob_name&#39;</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s">&#39;x_ms_lease_action&#39;</span><span class="p">,</span> <span class="n">x_ms_lease_action</span><span class="p">)</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">HTTPRequest</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="s">&#39;PUT&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">host</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_host</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="s">&#39;/&#39;</span> <span class="o">+</span> \
            <span class="n">_str</span><span class="p">(</span><span class="n">container_name</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39;/&#39;</span> <span class="o">+</span> <span class="n">_str</span><span class="p">(</span><span class="n">blob_name</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39;?comp=lease&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">headers</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">(</span><span class="s">&#39;x-ms-lease-id&#39;</span><span class="p">,</span> <span class="n">_str_or_none</span><span class="p">(</span><span class="n">x_ms_lease_id</span><span class="p">)),</span>
            <span class="p">(</span><span class="s">&#39;x-ms-lease-action&#39;</span><span class="p">,</span> <span class="n">_str_or_none</span><span class="p">(</span><span class="n">x_ms_lease_action</span><span class="p">)),</span>
            <span class="p">(</span><span class="s">&#39;x-ms-lease-duration&#39;</span><span class="p">,</span> <span class="n">_str_or_none</span><span class="p">(</span><span class="n">x_ms_lease_duration</span>\
                <span class="k">if</span> <span class="n">x_ms_lease_action</span> <span class="o">==</span> <span class="s">&#39;acquire&#39;</span> <span class="k">else</span> <span class="bp">None</span><span class="p">)),</span>
            <span class="p">(</span><span class="s">&#39;x-ms-lease-break-period&#39;</span><span class="p">,</span> <span class="n">_str_or_none</span><span class="p">(</span><span class="n">x_ms_lease_break_period</span><span class="p">)),</span>
            <span class="p">(</span><span class="s">&#39;x-ms-proposed-lease-id&#39;</span><span class="p">,</span> <span class="n">_str_or_none</span><span class="p">(</span><span class="n">x_ms_proposed_lease_id</span><span class="p">)),</span>
        <span class="p">]</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="n">request</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="n">_update_request_uri_query_local_storage</span><span class="p">(</span>
            <span class="n">request</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_local_storage</span><span class="p">)</span>
        <span class="n">request</span><span class="o">.</span><span class="n">headers</span> <span class="o">=</span> <span class="n">_update_storage_blob_header</span><span class="p">(</span>
            <span class="n">request</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">account_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">account_key</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_perform_request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">_parse_response_for_dict_filter</span><span class="p">(</span>
            <span class="n">response</span><span class="p">,</span>
            <span class="nb">filter</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;x-ms-lease-id&#39;</span><span class="p">,</span> <span class="s">&#39;x-ms-lease-time&#39;</span><span class="p">])</span>
</div>
<div class="viewcode-block" id="BlobService.snapshot_blob"><a class="viewcode-back" href="../../../api/azure.storage.blobservice.html#azure.storage.blobservice.BlobService.snapshot_blob">[docs]</a>    <span class="k">def</span> <span class="nf">snapshot_blob</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">container_name</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">,</span>
                      <span class="n">x_ms_meta_name_values</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">if_modified_since</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                      <span class="n">if_unmodified_since</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">if_match</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                      <span class="n">if_none_match</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">x_ms_lease_id</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Creates a read-only snapshot of a blob.</span>

<span class="sd">        container_name: Name of existing container.</span>
<span class="sd">        blob_name: Name of existing blob.</span>
<span class="sd">        x_ms_meta_name_values: Optional. Dict containing name and value pairs.</span>
<span class="sd">        if_modified_since: Optional. Datetime string.</span>
<span class="sd">        if_unmodified_since: DateTime string.</span>
<span class="sd">        if_match:</span>
<span class="sd">            Optional. snapshot the blob only if its ETag value matches the</span>
<span class="sd">            value specified.</span>
<span class="sd">        if_none_match: Optional. An ETag value</span>
<span class="sd">        x_ms_lease_id: Required if the blob has an active lease.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s">&#39;container_name&#39;</span><span class="p">,</span> <span class="n">container_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s">&#39;blob_name&#39;</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">)</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">HTTPRequest</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="s">&#39;PUT&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">host</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_host</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="s">&#39;/&#39;</span> <span class="o">+</span> \
            <span class="n">_str</span><span class="p">(</span><span class="n">container_name</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39;/&#39;</span> <span class="o">+</span> <span class="n">_str</span><span class="p">(</span><span class="n">blob_name</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39;?comp=snapshot&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">headers</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">(</span><span class="s">&#39;x-ms-meta-name-values&#39;</span><span class="p">,</span> <span class="n">x_ms_meta_name_values</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&#39;If-Modified-Since&#39;</span><span class="p">,</span> <span class="n">_str_or_none</span><span class="p">(</span><span class="n">if_modified_since</span><span class="p">)),</span>
            <span class="p">(</span><span class="s">&#39;If-Unmodified-Since&#39;</span><span class="p">,</span> <span class="n">_str_or_none</span><span class="p">(</span><span class="n">if_unmodified_since</span><span class="p">)),</span>
            <span class="p">(</span><span class="s">&#39;If-Match&#39;</span><span class="p">,</span> <span class="n">_str_or_none</span><span class="p">(</span><span class="n">if_match</span><span class="p">)),</span>
            <span class="p">(</span><span class="s">&#39;If-None-Match&#39;</span><span class="p">,</span> <span class="n">_str_or_none</span><span class="p">(</span><span class="n">if_none_match</span><span class="p">)),</span>
            <span class="p">(</span><span class="s">&#39;x-ms-lease-id&#39;</span><span class="p">,</span> <span class="n">_str_or_none</span><span class="p">(</span><span class="n">x_ms_lease_id</span><span class="p">))</span>
        <span class="p">]</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="n">request</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="n">_update_request_uri_query_local_storage</span><span class="p">(</span>
            <span class="n">request</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_local_storage</span><span class="p">)</span>
        <span class="n">request</span><span class="o">.</span><span class="n">headers</span> <span class="o">=</span> <span class="n">_update_storage_blob_header</span><span class="p">(</span>
            <span class="n">request</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">account_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">account_key</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_perform_request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">_parse_response_for_dict_filter</span><span class="p">(</span>
            <span class="n">response</span><span class="p">,</span>
            <span class="nb">filter</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;x-ms-snapshot&#39;</span><span class="p">,</span> <span class="s">&#39;etag&#39;</span><span class="p">,</span> <span class="s">&#39;last-modified&#39;</span><span class="p">])</span>
</div>
<div class="viewcode-block" id="BlobService.copy_blob"><a class="viewcode-back" href="../../../api/azure.storage.blobservice.html#azure.storage.blobservice.BlobService.copy_blob">[docs]</a>    <span class="k">def</span> <span class="nf">copy_blob</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">container_name</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">,</span> <span class="n">x_ms_copy_source</span><span class="p">,</span>
                  <span class="n">x_ms_meta_name_values</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                  <span class="n">x_ms_source_if_modified_since</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                  <span class="n">x_ms_source_if_unmodified_since</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                  <span class="n">x_ms_source_if_match</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">x_ms_source_if_none_match</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                  <span class="n">if_modified_since</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">if_unmodified_since</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                  <span class="n">if_match</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">if_none_match</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">x_ms_lease_id</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                  <span class="n">x_ms_source_lease_id</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Copies a blob to a destination within the storage account.</span>

<span class="sd">        container_name: Name of existing container.</span>
<span class="sd">        blob_name: Name of existing blob.</span>
<span class="sd">        x_ms_copy_source:</span>
<span class="sd">            URL up to 2 KB in length that specifies a blob. A source blob in</span>
<span class="sd">            the same account can be private, but a blob in another account</span>
<span class="sd">            must be public or accept credentials included in this URL, such as</span>
<span class="sd">            a Shared Access Signature. Examples:</span>
<span class="sd">            https://myaccount.blob.core.windows.net/mycontainer/myblob</span>
<span class="sd">            https://myaccount.blob.core.windows.net/mycontainer/myblob?snapshot=&lt;DateTime&gt;</span>
<span class="sd">        x_ms_meta_name_values: Optional. Dict containing name and value pairs.</span>
<span class="sd">        x_ms_source_if_modified_since:</span>
<span class="sd">            Optional. An ETag value. Specify this conditional header to copy</span>
<span class="sd">            the source blob only if its ETag matches the value specified.</span>
<span class="sd">        x_ms_source_if_unmodified_since:</span>
<span class="sd">            Optional. An ETag value. Specify this conditional header to copy</span>
<span class="sd">            the blob only if its ETag does not match the value specified.</span>
<span class="sd">        x_ms_source_if_match:</span>
<span class="sd">            Optional. A DateTime value. Specify this conditional header to</span>
<span class="sd">            copy the blob only if the source blob has been modified since the</span>
<span class="sd">            specified date/time.</span>
<span class="sd">        x_ms_source_if_none_match:</span>
<span class="sd">            Optional. An ETag value. Specify this conditional header to copy</span>
<span class="sd">            the source blob only if its ETag matches the value specified.</span>
<span class="sd">        if_modified_since: Optional. Datetime string.</span>
<span class="sd">        if_unmodified_since: DateTime string.</span>
<span class="sd">        if_match:</span>
<span class="sd">            Optional. Snapshot the blob only if its ETag value matches the</span>
<span class="sd">            value specified.</span>
<span class="sd">        if_none_match: Optional. An ETag value</span>
<span class="sd">        x_ms_lease_id: Required if the blob has an active lease.</span>
<span class="sd">        x_ms_source_lease_id:</span>
<span class="sd">            Optional. Specify this to perform the Copy Blob operation only if</span>
<span class="sd">            the lease ID given matches the active lease ID of the source blob.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s">&#39;container_name&#39;</span><span class="p">,</span> <span class="n">container_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s">&#39;blob_name&#39;</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s">&#39;x_ms_copy_source&#39;</span><span class="p">,</span> <span class="n">x_ms_copy_source</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">x_ms_copy_source</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s">&#39;/&#39;</span><span class="p">):</span>
            <span class="c"># Backwards compatibility for earlier versions of the SDK where</span>
            <span class="c"># the copy source can be in the following formats:</span>
            <span class="c"># - Blob in named container:</span>
            <span class="c">#     /accountName/containerName/blobName</span>
            <span class="c"># - Snapshot in named container:</span>
            <span class="c">#     /accountName/containerName/blobName?snapshot=&lt;DateTime&gt;</span>
            <span class="c"># - Blob in root container:</span>
            <span class="c">#     /accountName/blobName</span>
            <span class="c"># - Snapshot in root container:</span>
            <span class="c">#     /accountName/blobName?snapshot=&lt;DateTime&gt;</span>
            <span class="n">account</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">source</span> <span class="o">=</span>\
                <span class="n">x_ms_copy_source</span><span class="o">.</span><span class="n">partition</span><span class="p">(</span><span class="s">&#39;/&#39;</span><span class="p">)[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">partition</span><span class="p">(</span><span class="s">&#39;/&#39;</span><span class="p">)</span>
            <span class="n">x_ms_copy_source</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">protocol</span> <span class="o">+</span> <span class="s">&#39;://&#39;</span> <span class="o">+</span> \
                <span class="n">account</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">host_base</span> <span class="o">+</span> <span class="s">&#39;/&#39;</span> <span class="o">+</span> <span class="n">source</span>

        <span class="n">request</span> <span class="o">=</span> <span class="n">HTTPRequest</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="s">&#39;PUT&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">host</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_host</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="s">&#39;/&#39;</span> <span class="o">+</span> <span class="n">_str</span><span class="p">(</span><span class="n">container_name</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39;/&#39;</span> <span class="o">+</span> <span class="n">_str</span><span class="p">(</span><span class="n">blob_name</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39;&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">headers</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">(</span><span class="s">&#39;x-ms-copy-source&#39;</span><span class="p">,</span> <span class="n">_str_or_none</span><span class="p">(</span><span class="n">x_ms_copy_source</span><span class="p">)),</span>
            <span class="p">(</span><span class="s">&#39;x-ms-meta-name-values&#39;</span><span class="p">,</span> <span class="n">x_ms_meta_name_values</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&#39;x-ms-source-if-modified-since&#39;</span><span class="p">,</span>
             <span class="n">_str_or_none</span><span class="p">(</span><span class="n">x_ms_source_if_modified_since</span><span class="p">)),</span>
            <span class="p">(</span><span class="s">&#39;x-ms-source-if-unmodified-since&#39;</span><span class="p">,</span>
             <span class="n">_str_or_none</span><span class="p">(</span><span class="n">x_ms_source_if_unmodified_since</span><span class="p">)),</span>
            <span class="p">(</span><span class="s">&#39;x-ms-source-if-match&#39;</span><span class="p">,</span> <span class="n">_str_or_none</span><span class="p">(</span><span class="n">x_ms_source_if_match</span><span class="p">)),</span>
            <span class="p">(</span><span class="s">&#39;x-ms-source-if-none-match&#39;</span><span class="p">,</span>
             <span class="n">_str_or_none</span><span class="p">(</span><span class="n">x_ms_source_if_none_match</span><span class="p">)),</span>
            <span class="p">(</span><span class="s">&#39;If-Modified-Since&#39;</span><span class="p">,</span> <span class="n">_str_or_none</span><span class="p">(</span><span class="n">if_modified_since</span><span class="p">)),</span>
            <span class="p">(</span><span class="s">&#39;If-Unmodified-Since&#39;</span><span class="p">,</span> <span class="n">_str_or_none</span><span class="p">(</span><span class="n">if_unmodified_since</span><span class="p">)),</span>
            <span class="p">(</span><span class="s">&#39;If-Match&#39;</span><span class="p">,</span> <span class="n">_str_or_none</span><span class="p">(</span><span class="n">if_match</span><span class="p">)),</span>
            <span class="p">(</span><span class="s">&#39;If-None-Match&#39;</span><span class="p">,</span> <span class="n">_str_or_none</span><span class="p">(</span><span class="n">if_none_match</span><span class="p">)),</span>
            <span class="p">(</span><span class="s">&#39;x-ms-lease-id&#39;</span><span class="p">,</span> <span class="n">_str_or_none</span><span class="p">(</span><span class="n">x_ms_lease_id</span><span class="p">)),</span>
            <span class="p">(</span><span class="s">&#39;x-ms-source-lease-id&#39;</span><span class="p">,</span> <span class="n">_str_or_none</span><span class="p">(</span><span class="n">x_ms_source_lease_id</span><span class="p">))</span>
        <span class="p">]</span>

        <span class="n">request</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="n">request</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="n">_update_request_uri_query_local_storage</span><span class="p">(</span>
            <span class="n">request</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_local_storage</span><span class="p">)</span>
        <span class="n">request</span><span class="o">.</span><span class="n">headers</span> <span class="o">=</span> <span class="n">_update_storage_blob_header</span><span class="p">(</span>
            <span class="n">request</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">account_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">account_key</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_perform_request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">_parse_response_for_dict</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="BlobService.abort_copy_blob"><a class="viewcode-back" href="../../../api/azure.storage.blobservice.html#azure.storage.blobservice.BlobService.abort_copy_blob">[docs]</a>    <span class="k">def</span> <span class="nf">abort_copy_blob</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">container_name</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">,</span> <span class="n">x_ms_copy_id</span><span class="p">,</span>
                        <span class="n">x_ms_lease_id</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">         Aborts a pending copy_blob operation, and leaves a destination blob</span>
<span class="sd">         with zero length and full metadata.</span>

<span class="sd">         container_name: Name of destination container.</span>
<span class="sd">         blob_name: Name of destination blob.</span>
<span class="sd">         x_ms_copy_id:</span>
<span class="sd">            Copy identifier provided in the x-ms-copy-id of the original</span>
<span class="sd">            copy_blob operation.</span>
<span class="sd">         x_ms_lease_id:</span>
<span class="sd">            Required if the destination blob has an active infinite lease.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s">&#39;container_name&#39;</span><span class="p">,</span> <span class="n">container_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s">&#39;blob_name&#39;</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s">&#39;x_ms_copy_id&#39;</span><span class="p">,</span> <span class="n">x_ms_copy_id</span><span class="p">)</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">HTTPRequest</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="s">&#39;PUT&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">host</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_host</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="s">&#39;/&#39;</span> <span class="o">+</span> <span class="n">_str</span><span class="p">(</span><span class="n">container_name</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39;/&#39;</span> <span class="o">+</span> \
            <span class="n">_str</span><span class="p">(</span><span class="n">blob_name</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39;?comp=copy&amp;copyid=&#39;</span> <span class="o">+</span> \
            <span class="n">_str</span><span class="p">(</span><span class="n">x_ms_copy_id</span><span class="p">)</span>
        <span class="n">request</span><span class="o">.</span><span class="n">headers</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">(</span><span class="s">&#39;x-ms-lease-id&#39;</span><span class="p">,</span> <span class="n">_str_or_none</span><span class="p">(</span><span class="n">x_ms_lease_id</span><span class="p">)),</span>
            <span class="p">(</span><span class="s">&#39;x-ms-copy-action&#39;</span><span class="p">,</span> <span class="s">&#39;abort&#39;</span><span class="p">),</span>
        <span class="p">]</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="n">request</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="n">_update_request_uri_query_local_storage</span><span class="p">(</span>
            <span class="n">request</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_local_storage</span><span class="p">)</span>
        <span class="n">request</span><span class="o">.</span><span class="n">headers</span> <span class="o">=</span> <span class="n">_update_storage_blob_header</span><span class="p">(</span>
            <span class="n">request</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">account_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">account_key</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_perform_request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="BlobService.delete_blob"><a class="viewcode-back" href="../../../api/azure.storage.blobservice.html#azure.storage.blobservice.BlobService.delete_blob">[docs]</a>    <span class="k">def</span> <span class="nf">delete_blob</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">container_name</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">,</span> <span class="n">snapshot</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                    <span class="n">timeout</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">x_ms_lease_id</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                    <span class="n">x_ms_delete_snapshots</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Marks the specified blob or snapshot for deletion. The blob is later</span>
<span class="sd">        deleted during garbage collection.</span>

<span class="sd">        To mark a specific snapshot for deletion provide the date/time of the</span>
<span class="sd">        snapshot via the snapshot parameter.</span>

<span class="sd">        container_name: Name of existing container.</span>
<span class="sd">        blob_name: Name of existing blob.</span>
<span class="sd">        snapshot:</span>
<span class="sd">            Optional. The snapshot parameter is an opaque DateTime value that,</span>
<span class="sd">            when present, specifies the blob snapshot to delete.</span>
<span class="sd">        timeout:</span>
<span class="sd">            Optional. The timeout parameter is expressed in seconds.</span>
<span class="sd">            The Blob service returns an error when the timeout interval elapses</span>
<span class="sd">            while processing the request.</span>
<span class="sd">        x_ms_lease_id: Required if the blob has an active lease.</span>
<span class="sd">        x_ms_delete_snapshots:</span>
<span class="sd">            Required if the blob has associated snapshots. Specify one of the</span>
<span class="sd">            following two options:</span>
<span class="sd">                include: Delete the base blob and all of its snapshots.</span>
<span class="sd">                only: Delete only the blob&#39;s snapshots and not the blob itself.</span>
<span class="sd">            This header should be specified only for a request against the base</span>
<span class="sd">            blob resource. If this header is specified on a request to delete</span>
<span class="sd">            an individual snapshot, the Blob service returns status code 400</span>
<span class="sd">            (Bad Request). If this header is not specified on the request and</span>
<span class="sd">            the blob has associated snapshots, the Blob service returns status</span>
<span class="sd">            code 409 (Conflict).</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s">&#39;container_name&#39;</span><span class="p">,</span> <span class="n">container_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s">&#39;blob_name&#39;</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">)</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">HTTPRequest</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="s">&#39;DELETE&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">host</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_host</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="s">&#39;/&#39;</span> <span class="o">+</span> <span class="n">_str</span><span class="p">(</span><span class="n">container_name</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39;/&#39;</span> <span class="o">+</span> <span class="n">_str</span><span class="p">(</span><span class="n">blob_name</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39;&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">headers</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">(</span><span class="s">&#39;x-ms-lease-id&#39;</span><span class="p">,</span> <span class="n">_str_or_none</span><span class="p">(</span><span class="n">x_ms_lease_id</span><span class="p">)),</span>
            <span class="p">(</span><span class="s">&#39;x-ms-delete-snapshots&#39;</span><span class="p">,</span> <span class="n">_str_or_none</span><span class="p">(</span><span class="n">x_ms_delete_snapshots</span><span class="p">))</span>
        <span class="p">]</span>
        <span class="n">request</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">(</span><span class="s">&#39;snapshot&#39;</span><span class="p">,</span> <span class="n">_str_or_none</span><span class="p">(</span><span class="n">snapshot</span><span class="p">)),</span>
            <span class="p">(</span><span class="s">&#39;timeout&#39;</span><span class="p">,</span> <span class="n">_int_or_none</span><span class="p">(</span><span class="n">timeout</span><span class="p">))</span>
        <span class="p">]</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="n">request</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="n">_update_request_uri_query_local_storage</span><span class="p">(</span>
            <span class="n">request</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_local_storage</span><span class="p">)</span>
        <span class="n">request</span><span class="o">.</span><span class="n">headers</span> <span class="o">=</span> <span class="n">_update_storage_blob_header</span><span class="p">(</span>
            <span class="n">request</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">account_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">account_key</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_perform_request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="BlobService.put_block"><a class="viewcode-back" href="../../../api/azure.storage.blobservice.html#azure.storage.blobservice.BlobService.put_block">[docs]</a>    <span class="k">def</span> <span class="nf">put_block</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">container_name</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">,</span> <span class="n">block</span><span class="p">,</span> <span class="n">blockid</span><span class="p">,</span>
                  <span class="n">content_md5</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">x_ms_lease_id</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Creates a new block to be committed as part of a blob.</span>

<span class="sd">        container_name: Name of existing container.</span>
<span class="sd">        blob_name: Name of existing blob.</span>
<span class="sd">        block: Content of the block.</span>
<span class="sd">        blockid:</span>
<span class="sd">            Required. A value that identifies the block. The string must be</span>
<span class="sd">            less than or equal to 64 bytes in size.</span>
<span class="sd">        content_md5:</span>
<span class="sd">            Optional. An MD5 hash of the block content. This hash is used to</span>
<span class="sd">            verify the integrity of the blob during transport. When this</span>
<span class="sd">            header is specified, the storage service checks the hash that has</span>
<span class="sd">            arrived with the one that was sent.</span>
<span class="sd">        x_ms_lease_id: Required if the blob has an active lease.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s">&#39;container_name&#39;</span><span class="p">,</span> <span class="n">container_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s">&#39;blob_name&#39;</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s">&#39;block&#39;</span><span class="p">,</span> <span class="n">block</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s">&#39;blockid&#39;</span><span class="p">,</span> <span class="n">blockid</span><span class="p">)</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">HTTPRequest</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="s">&#39;PUT&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">host</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_host</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="s">&#39;/&#39;</span> <span class="o">+</span> \
            <span class="n">_str</span><span class="p">(</span><span class="n">container_name</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39;/&#39;</span> <span class="o">+</span> <span class="n">_str</span><span class="p">(</span><span class="n">blob_name</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39;?comp=block&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">headers</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">(</span><span class="s">&#39;Content-MD5&#39;</span><span class="p">,</span> <span class="n">_str_or_none</span><span class="p">(</span><span class="n">content_md5</span><span class="p">)),</span>
            <span class="p">(</span><span class="s">&#39;x-ms-lease-id&#39;</span><span class="p">,</span> <span class="n">_str_or_none</span><span class="p">(</span><span class="n">x_ms_lease_id</span><span class="p">))</span>
        <span class="p">]</span>
        <span class="n">request</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="p">[(</span><span class="s">&#39;blockid&#39;</span><span class="p">,</span> <span class="n">_encode_base64</span><span class="p">(</span><span class="n">_str_or_none</span><span class="p">(</span><span class="n">blockid</span><span class="p">)))]</span>
        <span class="n">request</span><span class="o">.</span><span class="n">body</span> <span class="o">=</span> <span class="n">_get_request_body_bytes_only</span><span class="p">(</span><span class="s">&#39;block&#39;</span><span class="p">,</span> <span class="n">block</span><span class="p">)</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="n">request</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="n">_update_request_uri_query_local_storage</span><span class="p">(</span>
            <span class="n">request</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_local_storage</span><span class="p">)</span>
        <span class="n">request</span><span class="o">.</span><span class="n">headers</span> <span class="o">=</span> <span class="n">_update_storage_blob_header</span><span class="p">(</span>
            <span class="n">request</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">account_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">account_key</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_perform_request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="BlobService.put_block_list"><a class="viewcode-back" href="../../../api/azure.storage.blobservice.html#azure.storage.blobservice.BlobService.put_block_list">[docs]</a>    <span class="k">def</span> <span class="nf">put_block_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">container_name</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">,</span> <span class="n">block_list</span><span class="p">,</span>
                       <span class="n">content_md5</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">x_ms_blob_cache_control</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                       <span class="n">x_ms_blob_content_type</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                       <span class="n">x_ms_blob_content_encoding</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                       <span class="n">x_ms_blob_content_language</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                       <span class="n">x_ms_blob_content_md5</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">x_ms_meta_name_values</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                       <span class="n">x_ms_lease_id</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Writes a blob by specifying the list of block IDs that make up the</span>
<span class="sd">        blob. In order to be written as part of a blob, a block must have been</span>
<span class="sd">        successfully written to the server in a prior Put Block (REST API)</span>
<span class="sd">        operation.</span>

<span class="sd">        container_name: Name of existing container.</span>
<span class="sd">        blob_name: Name of existing blob.</span>
<span class="sd">        block_list: A str list containing the block ids.</span>
<span class="sd">        content_md5:</span>
<span class="sd">            Optional. An MD5 hash of the block content. This hash is used to</span>
<span class="sd">            verify the integrity of the blob during transport. When this header</span>
<span class="sd">            is specified, the storage service checks the hash that has arrived</span>
<span class="sd">            with the one that was sent.</span>
<span class="sd">        x_ms_blob_cache_control:</span>
<span class="sd">            Optional. Sets the blob&#39;s cache control. If specified, this</span>
<span class="sd">            property is stored with the blob and returned with a read request.</span>
<span class="sd">        x_ms_blob_content_type:</span>
<span class="sd">            Optional. Sets the blob&#39;s content type. If specified, this property</span>
<span class="sd">            is stored with the blob and returned with a read request.</span>
<span class="sd">        x_ms_blob_content_encoding:</span>
<span class="sd">            Optional. Sets the blob&#39;s content encoding. If specified, this</span>
<span class="sd">            property is stored with the blob and returned with a read request.</span>
<span class="sd">        x_ms_blob_content_language:</span>
<span class="sd">            Optional. Set the blob&#39;s content language. If specified, this</span>
<span class="sd">            property is stored with the blob and returned with a read request.</span>
<span class="sd">        x_ms_blob_content_md5:</span>
<span class="sd">            Optional. An MD5 hash of the blob content. Note that this hash is</span>
<span class="sd">            not validated, as the hashes for the individual blocks were</span>
<span class="sd">            validated when each was uploaded.</span>
<span class="sd">        x_ms_meta_name_values: Optional. Dict containing name and value pairs.</span>
<span class="sd">        x_ms_lease_id: Required if the blob has an active lease.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s">&#39;container_name&#39;</span><span class="p">,</span> <span class="n">container_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s">&#39;blob_name&#39;</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s">&#39;block_list&#39;</span><span class="p">,</span> <span class="n">block_list</span><span class="p">)</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">HTTPRequest</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="s">&#39;PUT&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">host</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_host</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="s">&#39;/&#39;</span> <span class="o">+</span> \
            <span class="n">_str</span><span class="p">(</span><span class="n">container_name</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39;/&#39;</span> <span class="o">+</span> <span class="n">_str</span><span class="p">(</span><span class="n">blob_name</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39;?comp=blocklist&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">headers</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">(</span><span class="s">&#39;Content-MD5&#39;</span><span class="p">,</span> <span class="n">_str_or_none</span><span class="p">(</span><span class="n">content_md5</span><span class="p">)),</span>
            <span class="p">(</span><span class="s">&#39;x-ms-blob-cache-control&#39;</span><span class="p">,</span> <span class="n">_str_or_none</span><span class="p">(</span><span class="n">x_ms_blob_cache_control</span><span class="p">)),</span>
            <span class="p">(</span><span class="s">&#39;x-ms-blob-content-type&#39;</span><span class="p">,</span> <span class="n">_str_or_none</span><span class="p">(</span><span class="n">x_ms_blob_content_type</span><span class="p">)),</span>
            <span class="p">(</span><span class="s">&#39;x-ms-blob-content-encoding&#39;</span><span class="p">,</span>
             <span class="n">_str_or_none</span><span class="p">(</span><span class="n">x_ms_blob_content_encoding</span><span class="p">)),</span>
            <span class="p">(</span><span class="s">&#39;x-ms-blob-content-language&#39;</span><span class="p">,</span>
             <span class="n">_str_or_none</span><span class="p">(</span><span class="n">x_ms_blob_content_language</span><span class="p">)),</span>
            <span class="p">(</span><span class="s">&#39;x-ms-blob-content-md5&#39;</span><span class="p">,</span> <span class="n">_str_or_none</span><span class="p">(</span><span class="n">x_ms_blob_content_md5</span><span class="p">)),</span>
            <span class="p">(</span><span class="s">&#39;x-ms-meta-name-values&#39;</span><span class="p">,</span> <span class="n">x_ms_meta_name_values</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&#39;x-ms-lease-id&#39;</span><span class="p">,</span> <span class="n">_str_or_none</span><span class="p">(</span><span class="n">x_ms_lease_id</span><span class="p">))</span>
        <span class="p">]</span>
        <span class="n">request</span><span class="o">.</span><span class="n">body</span> <span class="o">=</span> <span class="n">_get_request_body</span><span class="p">(</span>
            <span class="n">_convert_block_list_to_xml</span><span class="p">(</span><span class="n">block_list</span><span class="p">))</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="n">request</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="n">_update_request_uri_query_local_storage</span><span class="p">(</span>
            <span class="n">request</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_local_storage</span><span class="p">)</span>
        <span class="n">request</span><span class="o">.</span><span class="n">headers</span> <span class="o">=</span> <span class="n">_update_storage_blob_header</span><span class="p">(</span>
            <span class="n">request</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">account_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">account_key</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_perform_request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="BlobService.get_block_list"><a class="viewcode-back" href="../../../api/azure.storage.blobservice.html#azure.storage.blobservice.BlobService.get_block_list">[docs]</a>    <span class="k">def</span> <span class="nf">get_block_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">container_name</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">,</span> <span class="n">snapshot</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                       <span class="n">blocklisttype</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">x_ms_lease_id</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Retrieves the list of blocks that have been uploaded as part of a</span>
<span class="sd">        block blob.</span>

<span class="sd">        container_name: Name of existing container.</span>
<span class="sd">        blob_name: Name of existing blob.</span>
<span class="sd">        snapshot:</span>
<span class="sd">            Optional. Datetime to determine the time to retrieve the blocks.</span>
<span class="sd">        blocklisttype:</span>
<span class="sd">            Specifies whether to return the list of committed blocks, the list</span>
<span class="sd">            of uncommitted blocks, or both lists together. Valid values are:</span>
<span class="sd">            committed, uncommitted, or all.</span>
<span class="sd">        x_ms_lease_id: Required if the blob has an active lease.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s">&#39;container_name&#39;</span><span class="p">,</span> <span class="n">container_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s">&#39;blob_name&#39;</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">)</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">HTTPRequest</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="s">&#39;GET&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">host</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_host</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="s">&#39;/&#39;</span> <span class="o">+</span> \
            <span class="n">_str</span><span class="p">(</span><span class="n">container_name</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39;/&#39;</span> <span class="o">+</span> <span class="n">_str</span><span class="p">(</span><span class="n">blob_name</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39;?comp=blocklist&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">headers</span> <span class="o">=</span> <span class="p">[(</span><span class="s">&#39;x-ms-lease-id&#39;</span><span class="p">,</span> <span class="n">_str_or_none</span><span class="p">(</span><span class="n">x_ms_lease_id</span><span class="p">))]</span>
        <span class="n">request</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">(</span><span class="s">&#39;snapshot&#39;</span><span class="p">,</span> <span class="n">_str_or_none</span><span class="p">(</span><span class="n">snapshot</span><span class="p">)),</span>
            <span class="p">(</span><span class="s">&#39;blocklisttype&#39;</span><span class="p">,</span> <span class="n">_str_or_none</span><span class="p">(</span><span class="n">blocklisttype</span><span class="p">))</span>
        <span class="p">]</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="n">request</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="n">_update_request_uri_query_local_storage</span><span class="p">(</span>
            <span class="n">request</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_local_storage</span><span class="p">)</span>
        <span class="n">request</span><span class="o">.</span><span class="n">headers</span> <span class="o">=</span> <span class="n">_update_storage_blob_header</span><span class="p">(</span>
            <span class="n">request</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">account_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">account_key</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_perform_request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">_convert_response_to_block_list</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="BlobService.put_page"><a class="viewcode-back" href="../../../api/azure.storage.blobservice.html#azure.storage.blobservice.BlobService.put_page">[docs]</a>    <span class="k">def</span> <span class="nf">put_page</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">container_name</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">,</span> <span class="n">page</span><span class="p">,</span> <span class="n">x_ms_range</span><span class="p">,</span>
                 <span class="n">x_ms_page_write</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">content_md5</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                 <span class="n">x_ms_lease_id</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">x_ms_if_sequence_number_lte</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                 <span class="n">x_ms_if_sequence_number_lt</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                 <span class="n">x_ms_if_sequence_number_eq</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                 <span class="n">if_modified_since</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">if_unmodified_since</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                 <span class="n">if_match</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">if_none_match</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Writes a range of pages to a page blob.</span>

<span class="sd">        container_name: Name of existing container.</span>
<span class="sd">        blob_name: Name of existing blob.</span>
<span class="sd">        page: Content of the page.</span>
<span class="sd">        x_ms_range:</span>
<span class="sd">            Required. Specifies the range of bytes to be written as a page.</span>
<span class="sd">            Both the start and end of the range must be specified. Must be in</span>
<span class="sd">            format: bytes=startByte-endByte. Given that pages must be aligned</span>
<span class="sd">            with 512-byte boundaries, the start offset must be a modulus of</span>
<span class="sd">            512 and the end offset must be a modulus of 512-1. Examples of</span>
<span class="sd">            valid byte ranges are 0-511, 512-1023, etc.</span>
<span class="sd">        x_ms_page_write:</span>
<span class="sd">            Required. You may specify one of the following options:</span>
<span class="sd">                update (lower case):</span>
<span class="sd">                    Writes the bytes specified by the request body into the</span>
<span class="sd">                    specified range. The Range and Content-Length headers must</span>
<span class="sd">                    match to perform the update.</span>
<span class="sd">                clear (lower case):</span>
<span class="sd">                    Clears the specified range and releases the space used in</span>
<span class="sd">                    storage for that range. To clear a range, set the</span>
<span class="sd">                    Content-Length header to zero, and the Range header to a</span>
<span class="sd">                    value that indicates the range to clear, up to maximum</span>
<span class="sd">                    blob size.</span>
<span class="sd">        timeout: the timeout parameter is expressed in seconds.</span>
<span class="sd">        content_md5:</span>
<span class="sd">            Optional. An MD5 hash of the page content. This hash is used to</span>
<span class="sd">            verify the integrity of the page during transport. When this header</span>
<span class="sd">            is specified, the storage service compares the hash of the content</span>
<span class="sd">            that has arrived with the header value that was sent. If the two</span>
<span class="sd">            hashes do not match, the operation will fail with error code 400</span>
<span class="sd">            (Bad Request).</span>
<span class="sd">        x_ms_lease_id: Required if the blob has an active lease.</span>
<span class="sd">        x_ms_if_sequence_number_lte:</span>
<span class="sd">            Optional. If the blob&#39;s sequence number is less than or equal to</span>
<span class="sd">            the specified value, the request proceeds; otherwise it fails.</span>
<span class="sd">        x_ms_if_sequence_number_lt:</span>
<span class="sd">            Optional. If the blob&#39;s sequence number is less than the specified</span>
<span class="sd">            value, the request proceeds; otherwise it fails.</span>
<span class="sd">        x_ms_if_sequence_number_eq:</span>
<span class="sd">            Optional. If the blob&#39;s sequence number is equal to the specified</span>
<span class="sd">            value, the request proceeds; otherwise it fails.</span>
<span class="sd">        if_modified_since:</span>
<span class="sd">            Optional. A DateTime value. Specify this conditional header to</span>
<span class="sd">            write the page only if the blob has been modified since the</span>
<span class="sd">            specified date/time. If the blob has not been modified, the Blob</span>
<span class="sd">            service fails.</span>
<span class="sd">        if_unmodified_since:</span>
<span class="sd">            Optional. A DateTime value. Specify this conditional header to</span>
<span class="sd">            write the page only if the blob has not been modified since the</span>
<span class="sd">            specified date/time. If the blob has been modified, the Blob</span>
<span class="sd">            service fails.</span>
<span class="sd">        if_match:</span>
<span class="sd">            Optional. An ETag value. Specify an ETag value for this conditional</span>
<span class="sd">            header to write the page only if the blob&#39;s ETag value matches the</span>
<span class="sd">            value specified. If the values do not match, the Blob service fails.</span>
<span class="sd">        if_none_match:</span>
<span class="sd">            Optional. An ETag value. Specify an ETag value for this conditional</span>
<span class="sd">            header to write the page only if the blob&#39;s ETag value does not</span>
<span class="sd">            match the value specified. If the values are identical, the Blob</span>
<span class="sd">            service fails.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s">&#39;container_name&#39;</span><span class="p">,</span> <span class="n">container_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s">&#39;blob_name&#39;</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s">&#39;page&#39;</span><span class="p">,</span> <span class="n">page</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s">&#39;x_ms_range&#39;</span><span class="p">,</span> <span class="n">x_ms_range</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s">&#39;x_ms_page_write&#39;</span><span class="p">,</span> <span class="n">x_ms_page_write</span><span class="p">)</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">HTTPRequest</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="s">&#39;PUT&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">host</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_host</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="s">&#39;/&#39;</span> <span class="o">+</span> \
            <span class="n">_str</span><span class="p">(</span><span class="n">container_name</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39;/&#39;</span> <span class="o">+</span> <span class="n">_str</span><span class="p">(</span><span class="n">blob_name</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39;?comp=page&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">headers</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">(</span><span class="s">&#39;x-ms-range&#39;</span><span class="p">,</span> <span class="n">_str_or_none</span><span class="p">(</span><span class="n">x_ms_range</span><span class="p">)),</span>
            <span class="p">(</span><span class="s">&#39;Content-MD5&#39;</span><span class="p">,</span> <span class="n">_str_or_none</span><span class="p">(</span><span class="n">content_md5</span><span class="p">)),</span>
            <span class="p">(</span><span class="s">&#39;x-ms-page-write&#39;</span><span class="p">,</span> <span class="n">_str_or_none</span><span class="p">(</span><span class="n">x_ms_page_write</span><span class="p">)),</span>
            <span class="p">(</span><span class="s">&#39;x-ms-lease-id&#39;</span><span class="p">,</span> <span class="n">_str_or_none</span><span class="p">(</span><span class="n">x_ms_lease_id</span><span class="p">)),</span>
            <span class="p">(</span><span class="s">&#39;x-ms-if-sequence-number-le&#39;</span><span class="p">,</span>
             <span class="n">_str_or_none</span><span class="p">(</span><span class="n">x_ms_if_sequence_number_lte</span><span class="p">)),</span>
            <span class="p">(</span><span class="s">&#39;x-ms-if-sequence-number-lt&#39;</span><span class="p">,</span>
             <span class="n">_str_or_none</span><span class="p">(</span><span class="n">x_ms_if_sequence_number_lt</span><span class="p">)),</span>
            <span class="p">(</span><span class="s">&#39;x-ms-if-sequence-number-eq&#39;</span><span class="p">,</span>
             <span class="n">_str_or_none</span><span class="p">(</span><span class="n">x_ms_if_sequence_number_eq</span><span class="p">)),</span>
            <span class="p">(</span><span class="s">&#39;If-Modified-Since&#39;</span><span class="p">,</span> <span class="n">_str_or_none</span><span class="p">(</span><span class="n">if_modified_since</span><span class="p">)),</span>
            <span class="p">(</span><span class="s">&#39;If-Unmodified-Since&#39;</span><span class="p">,</span> <span class="n">_str_or_none</span><span class="p">(</span><span class="n">if_unmodified_since</span><span class="p">)),</span>
            <span class="p">(</span><span class="s">&#39;If-Match&#39;</span><span class="p">,</span> <span class="n">_str_or_none</span><span class="p">(</span><span class="n">if_match</span><span class="p">)),</span>
            <span class="p">(</span><span class="s">&#39;If-None-Match&#39;</span><span class="p">,</span> <span class="n">_str_or_none</span><span class="p">(</span><span class="n">if_none_match</span><span class="p">))</span>
        <span class="p">]</span>
        <span class="n">request</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="p">[(</span><span class="s">&#39;timeout&#39;</span><span class="p">,</span> <span class="n">_int_or_none</span><span class="p">(</span><span class="n">timeout</span><span class="p">))]</span>
        <span class="n">request</span><span class="o">.</span><span class="n">body</span> <span class="o">=</span> <span class="n">_get_request_body_bytes_only</span><span class="p">(</span><span class="s">&#39;page&#39;</span><span class="p">,</span> <span class="n">page</span><span class="p">)</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="n">request</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="n">_update_request_uri_query_local_storage</span><span class="p">(</span>
            <span class="n">request</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_local_storage</span><span class="p">)</span>
        <span class="n">request</span><span class="o">.</span><span class="n">headers</span> <span class="o">=</span> <span class="n">_update_storage_blob_header</span><span class="p">(</span>
            <span class="n">request</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">account_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">account_key</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_perform_request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="BlobService.get_page_ranges"><a class="viewcode-back" href="../../../api/azure.storage.blobservice.html#azure.storage.blobservice.BlobService.get_page_ranges">[docs]</a>    <span class="k">def</span> <span class="nf">get_page_ranges</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">container_name</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">,</span> <span class="n">snapshot</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                        <span class="nb">range</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">x_ms_range</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">x_ms_lease_id</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Retrieves the page ranges for a blob.</span>

<span class="sd">        container_name: Name of existing container.</span>
<span class="sd">        blob_name: Name of existing blob.</span>
<span class="sd">        snapshot:</span>
<span class="sd">            Optional. The snapshot parameter is an opaque DateTime value that,</span>
<span class="sd">            when present, specifies the blob snapshot to retrieve information</span>
<span class="sd">            from.</span>
<span class="sd">        range:</span>
<span class="sd">            Optional. Specifies the range of bytes over which to list ranges,</span>
<span class="sd">            inclusively. If omitted, then all ranges for the blob are returned.</span>
<span class="sd">        x_ms_range:</span>
<span class="sd">            Optional. Specifies the range of bytes to be written as a page.</span>
<span class="sd">            Both the start and end of the range must be specified. Must be in</span>
<span class="sd">            format: bytes=startByte-endByte. Given that pages must be aligned</span>
<span class="sd">            with 512-byte boundaries, the start offset must be a modulus of</span>
<span class="sd">            512 and the end offset must be a modulus of 512-1. Examples of</span>
<span class="sd">            valid byte ranges are 0-511, 512-1023, etc.</span>
<span class="sd">        x_ms_lease_id: Required if the blob has an active lease.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s">&#39;container_name&#39;</span><span class="p">,</span> <span class="n">container_name</span><span class="p">)</span>
        <span class="n">_validate_not_none</span><span class="p">(</span><span class="s">&#39;blob_name&#39;</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">)</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">HTTPRequest</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="s">&#39;GET&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">host</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_host</span><span class="p">()</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="s">&#39;/&#39;</span> <span class="o">+</span> \
            <span class="n">_str</span><span class="p">(</span><span class="n">container_name</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39;/&#39;</span> <span class="o">+</span> <span class="n">_str</span><span class="p">(</span><span class="n">blob_name</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39;?comp=pagelist&#39;</span>
        <span class="n">request</span><span class="o">.</span><span class="n">headers</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">(</span><span class="s">&#39;Range&#39;</span><span class="p">,</span> <span class="n">_str_or_none</span><span class="p">(</span><span class="nb">range</span><span class="p">)),</span>
            <span class="p">(</span><span class="s">&#39;x-ms-range&#39;</span><span class="p">,</span> <span class="n">_str_or_none</span><span class="p">(</span><span class="n">x_ms_range</span><span class="p">)),</span>
            <span class="p">(</span><span class="s">&#39;x-ms-lease-id&#39;</span><span class="p">,</span> <span class="n">_str_or_none</span><span class="p">(</span><span class="n">x_ms_lease_id</span><span class="p">))</span>
        <span class="p">]</span>
        <span class="n">request</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="p">[(</span><span class="s">&#39;snapshot&#39;</span><span class="p">,</span> <span class="n">_str_or_none</span><span class="p">(</span><span class="n">snapshot</span><span class="p">))]</span>
        <span class="n">request</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="n">request</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="n">_update_request_uri_query_local_storage</span><span class="p">(</span>
            <span class="n">request</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_local_storage</span><span class="p">)</span>
        <span class="n">request</span><span class="o">.</span><span class="n">headers</span> <span class="o">=</span> <span class="n">_update_storage_blob_header</span><span class="p">(</span>
            <span class="n">request</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">account_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">account_key</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_perform_request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">_ETreeXmlToObject</span><span class="o">.</span><span class="n">parse_simple_list</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">PageList</span><span class="p">,</span> <span class="n">PageRange</span><span class="p">,</span> <span class="s">&quot;page_ranges&quot;</span><span class="p">)</span></div></div>
</pre></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="../../../index.html">pydocumentdb 0.9.3-preview documentation</a> &raquo;</li>
          <li><a href="../../index.html" >Module code</a> &raquo;</li>
          <li><a href="../../azure.html" >azure</a> &raquo;</li>
          <li><a href="../storage.html" >azure.storage</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2014, Microsoft.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.3.
    </div>
  </body>
</html>